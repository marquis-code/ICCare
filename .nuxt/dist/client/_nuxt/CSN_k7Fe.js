import{e as S,r as y,p as h,m as B,G as D,c as p,o as m,x,a as f,b as N,t as k,F as R,E,d as $,k as w,n as b,w as F,g as U,v as j,T as I}from"./BTnRPOtx.js";import{r as _}from"./COqWjZaL.js";import{u as C}from"./DIrjWiVX.js";const G={key:0,class:"block text-sm font-medium text-gray-700 mb-2"},q={class:"flex flex-wrap gap-1 flex-1"},H={key:0,class:"text-gray-400"},Q=["onClick"],J={key:0,class:"absolute z-50 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto"},K={key:0,class:"p-2 border-b border-gray-200"},P=["checked",".indeterminate"],W={key:2},X=["onClick"],Y=["checked"],Z={class:"text-sm text-gray-700"},ee={key:3,class:"px-3 py-4 text-sm text-gray-500 text-center"},le=S({__name:"MultiSelect",props:{modelValue:{},options:{},label:{default:""},placeholder:{default:"Select items..."},searchable:{type:Boolean,default:!0},selectAll:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(n,{emit:i}){const t=n,v=i,c=y(null),l=y(!1),u=y(""),g=h(()=>t.options.filter(r=>t.modelValue.includes(r.value))),e=h(()=>{if(!u.value)return t.options;const r=u.value.toLowerCase();return t.options.filter(a=>a.label.toLowerCase().includes(r))}),s=h(()=>t.options.length>0&&t.modelValue.length===t.options.length),o=h(()=>t.modelValue.length>0&&t.modelValue.length<t.options.length),T=r=>t.modelValue.includes(r),z=()=>{l.value=!l.value,l.value||(u.value="")},A=r=>{const a=[...t.modelValue],d=a.indexOf(r.value);d>-1?a.splice(d,1):a.push(r.value),v("update:modelValue",a)},M=r=>{const a=t.modelValue.filter(d=>d!==r);v("update:modelValue",a)},L=()=>{s.value?v("update:modelValue",[]):v("update:modelValue",t.options.map(r=>r.value))},V=r=>{c.value&&!c.value.contains(r.target)&&(l.value=!1,u.value="")};return B(()=>{document.addEventListener("click",V)}),D(()=>{document.removeEventListener("click",V)}),(r,a)=>(m(),p("div",{class:"relative",ref_key:"multiselectRef",ref:c},[r.label?(m(),p("label",G,k(r.label),1)):x("",!0),f("div",{onClick:z,class:b(["w-full px-3 py-3 border-[0.5px] border-gray-100 outline-none rounded-xl focus:outline-nonecursor-pointer bg-white min-h-[42px] flex items-center justify-between",{"ring-2 ring-blue-500":l.value}])},[f("div",q,[g.value.length===0?(m(),p("span",H,k(r.placeholder),1)):x("",!0),(m(!0),p(R,null,E(g.value,d=>(m(),p("span",{key:d.value,class:"inline-flex items-center gap-1 px-2 py-2 bg-blue-100 text-blue-800 rounded-full text-sm"},[$(k(d.label)+" ",1),f("button",{onClick:w(O=>M(d.value),["stop"]),class:"hover:text-blue-600 focus:outline-none"},a[4]||(a[4]=[f("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Q)]))),128))]),(m(),p("svg",{class:b(["w-5 h-5 text-gray-400 transition-transform",{"transform rotate-180":l.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a[5]||(a[5]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),N(I,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:F(()=>[l.value?(m(),p("div",J,[r.searchable?(m(),p("div",K,[U(f("input",{"onUpdate:modelValue":a[0]||(a[0]=d=>u.value=d),type:"text",placeholder:"Search...",class:"custom-input",onClick:a[1]||(a[1]=w(()=>{},["stop"]))},null,512),[[j,u.value]])])):x("",!0),r.selectAll?(m(),p("div",{key:1,class:"px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-200 flex items-center gap-2",onClick:L},[f("input",{type:"checkbox",checked:s.value,".indeterminate":o.value,class:"custom-checkbox",onClick:a[2]||(a[2]=w(()=>{},["stop"]))},null,40,P),a[6]||(a[6]=f("span",{class:"text-sm font-medium text-gray-700"},"Select All",-1))])):x("",!0),e.value.length>0?(m(),p("div",W,[(m(!0),p(R,null,E(e.value,d=>(m(),p("div",{key:d.value,class:"px-3 py-2 hover:bg-gray-50 cursor-pointer flex items-center gap-2",onClick:O=>A(d)},[f("input",{type:"checkbox",checked:T(d.value),class:"custom-checkbox",onClick:a[3]||(a[3]=w(()=>{},["stop"]))},null,8,Y),f("span",Z,k(d.label),1)],8,X))),128))])):(m(),p("div",ee," No options found "))])):x("",!0)]),_:1})],512))}}),oe=()=>{const n=y(!1),i=y(null),{showToast:t}=C();return{loading:n,utilizationData:i,getUtilizationLevel:async c=>{var l,u,g,e;n.value=!0;try{const s=await _.$_get_utilization_level(c);if(s.type!=="ERROR")return i.value=s.data,s.data;{const o=((g=(u=(l=s==null?void 0:s.data)==null?void 0:l.detail)==null?void 0:u[0])==null?void 0:g.msg)||((e=s==null?void 0:s.data)==null?void 0:e.error)||"Failed to fetch utilization data";return t({title:"Error",message:o,toastType:"error",duration:3e3}),null}}catch(s){return t({title:"Error",message:(s==null?void 0:s.message)||"Something went wrong",toastType:"error",duration:3e3}),null}finally{n.value=!1}}}},re=()=>{const n=y(!1),{showToast:i}=C();return{loading:n,scheduleReport:async v=>{var c,l,u,g;n.value=!0;try{const e=await _.$_schedule_report(v);if(e.type!=="ERROR")return i({title:"Success",message:"Report scheduled successfully",toastType:"success",duration:3e3}),e.data;{const s=((u=(l=(c=e==null?void 0:e.data)==null?void 0:c.detail)==null?void 0:l[0])==null?void 0:u.msg)||((g=e==null?void 0:e.data)==null?void 0:g.error)||"Failed to schedule report";return i({title:"Error",message:s,toastType:"error",duration:3e3}),null}}catch(e){return i({title:"Error",message:(e==null?void 0:e.message)||"Something went wrong",toastType:"error",duration:3e3}),null}finally{n.value=!1}}}},ne=()=>{const n=y(!1),{showToast:i}=C();return{loading:n,exportData:async v=>{var c,l,u,g;n.value=!0;try{const e=await _.$_export_data(v);if(e.type!=="ERROR")return i({title:"Success",message:"Data exported successfully",toastType:"success",duration:3e3}),e.data;{const s=((u=(l=(c=e==null?void 0:e.data)==null?void 0:c.detail)==null?void 0:l[0])==null?void 0:u.msg)||((g=e==null?void 0:e.data)==null?void 0:g.error)||"Failed to export data";return i({title:"Error",message:s,toastType:"error",duration:3e3}),null}}catch(e){return i({title:"Error",message:(e==null?void 0:e.message)||"Something went wrong",toastType:"error",duration:3e3}),null}finally{n.value=!1}}}},ie=()=>{const n=y(!1),i=y(null),{showToast:t}=C();return{loading:n,alertResponse:i,checkAndNotifyAlerts:async c=>{var l,u,g,e,s;n.value=!0,i.value=null;try{const o=await _.$_check_and_notify_alerts(c);if(o.type!=="ERROR")return i.value=o.data,(l=o.data)!=null&&l.alert_triggered?t({title:"Alert Triggered",message:o.data.message||"Alert has been triggered and notifications sent",toastType:"warning",duration:5e3}):t({title:"All Clear",message:o.data.message||"Inventory levels are normal",toastType:"success",duration:3e3}),o.data;{const T=((e=(g=(u=o==null?void 0:o.data)==null?void 0:u.detail)==null?void 0:g[0])==null?void 0:e.msg)||((s=o==null?void 0:o.data)==null?void 0:s.error)||"Failed to check alerts";return t({title:"Error",message:T,toastType:"error",duration:3e3}),null}}catch(o){return t({title:"Error",message:(o==null?void 0:o.message)||"Something went wrong",toastType:"error",duration:3e3}),null}finally{n.value=!1}}}},ue=S({__name:"LoadingSpinner",props:{size:{default:"md"},color:{default:"text-blue-600"}},setup(n){const i=n,t=h(()=>({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"})[i.size]),v=h(()=>`flex justify-center items-center ${i.color}`);return(c,l)=>(m(),p("div",{class:b(v.value)},[(m(),p("svg",{class:b(["animate-spin",t.value]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},l[0]||(l[0]=[f("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),f("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]),2))],2))}});export{ue as _,re as a,ne as b,ie as c,le as d,oe as u};
