import{e as V,r as f,p as I,m as D,E as R,D as C,c as v,a as r,k as T,F as $,C as B,h as a,t as h,d as E,o as m,g as K,v as j,G as A}from"./CXK3JPD_.js";const L=window.setInterval,M={class:"min-h-screen flex items-center justify-center p-4 bg-gray-50"},S={class:"w-full max-w-md"},U={class:"bg-white rounded-2xl shadow-xl p-6 sm:p-8 lg:p-12"},F={class:"flex justify-center gap-3 sm:gap-4"},N=["onUpdate:modelValue","onInput","onKeydown"],P=["disabled"],G={class:"text-center text-sm text-gray-600 mt-6"},q=["disabled"],J=V({__name:"verify-otp",setup(z){const n=f(["","","",""]),l=f([]),p=f(!1),d=f(!1),c=f(34);let i=null;const y=I(()=>n.value.every(e=>e.length===1&&/^\d$/.test(e))),b=(e,t)=>{var o;const s=t.target.value;if(!/^\d*$/.test(s)){n.value[e]="";return}s&&e<3&&((o=l.value[e+1])==null||o.focus())},w=(e,t)=>{var u,s,o;t.key==="Backspace"&&!n.value[e]&&e>0?(u=l.value[e-1])==null||u.focus():t.key==="ArrowLeft"&&e>0?(s=l.value[e-1])==null||s.focus():t.key==="ArrowRight"&&e<3&&((o=l.value[e+1])==null||o.focus())},x=e=>{var u,s;e.preventDefault();const t=(u=e.clipboardData)==null?void 0:u.getData("text").trim();t&&/^\d{4}$/.test(t)&&(n.value=t.split(""),(s=l.value[3])==null||s.focus())},g=()=>{c.value=34,i&&clearInterval(i),i=L(()=>{c.value--,c.value<=0&&i&&(clearInterval(i),i=null)},1e3)},_=async()=>{var e;if(y.value){p.value=!0;try{const t=n.value.join("");await A("/auth/login")}catch(t){console.error("Verification error:",t),n.value=["","","",""],(e=l.value[0])==null||e.focus()}finally{p.value=!1}}},k=async()=>{if(!(c.value>0||d.value)){d.value=!0;try{g(),console.log("Verification code resent successfully")}catch(e){console.error("Resend error:",e)}finally{d.value=!1}}};return D(()=>{R(()=>{var e;(e=l.value[0])==null||e.focus()}),g()}),C(()=>{i&&clearInterval(i)}),(e,t)=>(m(),v("div",M,[r("div",S,[r("div",U,[t[1]||(t[1]=r("h2",{class:"text-2xl sm:text-3xl font-bold text-center text-gray-900 mb-3"},"Verify Email Account",-1)),t[2]||(t[2]=r("p",{class:"text-center text-gray-600 mb-10"},"Kindly input the code sent to your Email account",-1)),r("form",{onSubmit:T(_,["prevent"]),class:"space-y-8"},[r("div",F,[(m(!0),v($,null,B(a(n),(u,s)=>K((m(),v("input",{key:s,ref_for:!0,ref:o=>{o&&(a(l)[s]=o)},"onUpdate:modelValue":o=>a(n)[s]=o,type:"text",maxlength:"1",inputmode:"numeric",pattern:"[0-9]",onInput:o=>b(s,o),onKeydown:o=>w(s,o),onPaste:x,class:"w-16 h-16 sm:w-20 sm:h-20 text-center text-2xl font-semibold border-[0.5px] border-gray-100 rounded-xl focus:border-[#0e7490] focus:ring-2 focus:ring-[#0e7490] focus:outline-none transition-all"},null,40,N)),[[j,a(n)[s]]])),128))]),r("button",{type:"submit",disabled:a(p)||!a(y),class:"w-full bg-[#0e7490] hover:bg-[#0d5563] text-white font-semibold py-3 px-4 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},h(a(p)?"Verifying...":"Verify"),9,P)],32),r("p",G,[t[0]||(t[0]=E(" Don't receive code sent? ")),r("button",{onClick:k,disabled:a(c)>0||a(d),class:"text-green-600 hover:text-green-700 font-semibold disabled:opacity-50 disabled:cursor-not-allowed"},h(a(d)?"Sending...":`Resend ${a(c)>0?`(${a(c)})`:""}`),9,q)])])])]))}});export{J as default};
