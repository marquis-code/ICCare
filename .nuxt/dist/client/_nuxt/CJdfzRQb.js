import{_ as bt}from"./D6VpnPhW.js";import{_ as yt}from"./C6dXenCW.js";import{_ as Wt}from"./DPUIhfXB.js";import{r as C,e as Ee,p as O,l as xe,q as ge,b as g,w as ue,T as me,B as ht,o as u,c as f,x as D,a as e,t as v,h as c,J as wt,n as H,d as we,H as Jt,F as ve,z as Be,g as Oe,G as vt,k as _e,K as Yt,_ as Re,m as qt,A as _t}from"./DdfR3j8y.js";import{b as kt,u as Qt,a as Xt}from"./DA6TZ0E3.js";import{u as je}from"./CQckq9Yq.js";import{u as Ct,a as es}from"./C_XPu8Hd.js";import{u as St,a as ts}from"./Dd9xWfc4.js";import{a as ss,u as os}from"./C7lLD9RR.js";import{u as ls}from"./kcPhNHIm.js";import"./CbReIz1O.js";const as=()=>{const Y=C(!1),F=C(null),{showToast:b}=je();return{loading:Y,sample:F,registerSample:async $=>{var Z,p,k,P;Y.value=!0;try{const S=await kt.$_register_sample($);if(S.type!=="ERROR")return F.value=S.data,b({title:"Success",message:"Sample registered successfully",toastType:"success",duration:3e3}),S.data;{const B=((k=(p=(Z=S==null?void 0:S.data)==null?void 0:Z.detail)==null?void 0:p[0])==null?void 0:k.msg)||((P=S==null?void 0:S.data)==null?void 0:P.error)||"Failed to register sample";return b({title:"Error",message:B,toastType:"error",duration:3e3}),null}}catch(S){return b({title:"Error",message:(S==null?void 0:S.message)||"Something went wrong",toastType:"error",duration:3e3}),null}finally{Y.value=!1}}}},is=()=>{const Y=C(!1),F=C(null),{showToast:b}=je();return{loading:Y,sample:F,updateSample:async($,Z)=>{var p,k,P,S;Y.value=!0;try{const B=await kt.$_update_sample($,Z);if(B.type!=="ERROR")return F.value=B.data,b({title:"Success",message:"Sample updated successfully",toastType:"success",duration:3e3}),B.data;{const ee=((P=(k=(p=B==null?void 0:B.data)==null?void 0:p.detail)==null?void 0:k[0])==null?void 0:P.msg)||((S=B==null?void 0:B.data)==null?void 0:S.error)||"Failed to update sample";return b({title:"Error",message:ee,toastType:"error",duration:3e3}),null}}catch(B){return b({title:"Error",message:(B==null?void 0:B.message)||"Something went wrong",toastType:"error",duration:3e3}),null}finally{Y.value=!1}}}},ns={class:"bg-white rounded-xl w-full max-w-3xl shadow-2xl transform transition-all flex flex-col max-h-[95vh] sm:max-h-[90vh]"},rs={class:"flex-shrink-0 p-4 sm:p-6 border-b border-gray-200"},ds={class:"flex items-center justify-between"},cs={class:"flex items-center gap-3"},us={class:"text-lg sm:text-xl font-medium text-[#033958]"},ms=["disabled"],ps={class:"flex-1 overflow-y-auto custom-scrollbar"},gs={class:"p-4 sm:p-6 md:p-8"},fs={class:"mb-6 sm:mb-10"},xs={class:"flex items-center justify-between relative"},vs={class:"flex flex-col items-center flex-1 relative z-10"},_s={key:1},bs={class:"flex-1 h-[0.5px] mx-1 sm:mx-2 md:mx-4 relative",style:{top:"-16px"}},ys={class:"flex flex-col items-center flex-1 relative z-10"},hs={key:1},ws={class:"flex-1 h-[0.5px] mx-1 sm:mx-2 md:mx-4 relative",style:{top:"-16px"}},ks={class:"flex flex-col items-center flex-1 relative z-10"},Cs={key:1},Ss={class:"flex-1 h-[0.5px] mx-1 sm:mx-2 md:mx-4 relative",style:{top:"-16px"}},$s={class:"flex flex-col items-center flex-1 relative z-10"},Vs={key:"step1",class:"space-y-4 sm:space-y-6"},Bs={class:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-5"},Fs={key:"step2",class:"space-y-4 sm:space-y-6"},Ds={class:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-5"},Ls={key:0},zs={class:"bg-gray-25 p-2 sm:p-3 md:p-4 rounded-lg border border-gray-50 mb-3 sm:mb-4"},As={class:"text-[10px] sm:text-xs text-gray-600 flex items-center gap-1 flex-wrap"},Ms={class:"font-semibold text-blue-600"},Us={key:0,class:"text-center py-8"},Ts={key:1,class:"overflow-x-auto rounded-lg pb-2 sm:pb-4 bg-gray-25 p-2 sm:p-3"},Ns={class:"w-full"},Is=["onClick","disabled"],Os={key:2,class:"mt-4 bg-white p-4 rounded-lg border border-gray-200"},Es={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},Rs={class:"text-center"},js={class:"text-lg font-bold text-gray-900"},Hs={class:"text-center"},Ps={class:"text-lg font-bold text-red-600"},Gs={class:"text-center"},Zs={class:"text-lg font-bold text-green-600"},Ks={class:"text-center"},Ws={class:"text-lg font-bold text-blue-600"},Js={key:1,class:"text-center py-8 bg-gray-50 rounded-lg"},Ys={key:"step3",class:"space-y-6 sm:space-y-8"},qs={class:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-5"},Qs={class:"md:col-span-2"},Xs={class:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-5"},eo={class:"md:col-span-2"},to={class:"grid grid-cols-1 gap-3 sm:gap-5"},so={class:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4"},oo={class:"md:col-span-2"},lo={key:"step4",class:"space-y-4 sm:space-y-6"},ao={class:"space-y-3 sm:space-y-4"},io={class:"flex gap-2 border-b border-gray-200"},no={class:"flex flex-col items-center gap-2 sm:gap-4"},ro={class:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-full bg-blue-100 flex items-center justify-center"},co=["disabled"],uo={class:"space-y-3"},mo=["disabled"],po={key:0,class:"space-y-2 sm:space-y-3"},go={class:"text-xs sm:text-sm font-semibold text-gray-700"},fo={class:"grid grid-cols-1 gap-2 sm:gap-3"},xo={class:"flex items-start gap-2 sm:gap-3 md:gap-4"},vo={class:"flex-shrink-0"},_o={key:0,class:"w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 rounded-lg overflow-hidden border border-gray-200"},bo=["src","alt"],yo={key:1,class:"w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 rounded-lg bg-gray-100 flex items-center justify-center border border-gray-200"},ho={class:"flex-1 min-w-0"},wo=["title"],ko={class:"text-[10px] sm:text-xs text-gray-500 mt-1"},Co={key:0,class:"mt-1 sm:mt-2"},So=["onClick"],$o=["onClick","disabled"],Vo={key:1,class:"text-center py-6 sm:py-8"},Bo={class:"flex-shrink-0 border-t border-gray-200 p-4 sm:p-6 bg-gray-50"},Fo={class:"flex justify-end space-x-2 sm:space-x-4"},Do=["disabled"],Lo=["disabled"],zo=["disabled"],Ao=["disabled"],Mo={key:1,class:"animate-spin h-4 w-4 sm:h-5 sm:w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Uo={class:"hidden sm:inline"},To={class:"sm:hidden"},No=Ee({__name:"NewSpecimenModal",props:{modelValue:{type:Boolean},editData:{}},emits:["update:modelValue","saved"],setup(Y,{emit:F}){const{loading:b,updateSample:re}=is(),$=Y,Z=F,{loading:p,registerSample:k}=as(),{loading:P,sites:S,getSites:B}=Ct(),{loading:ee,categories:n,getCategories:a}=St(),{loading:U,boxes:T,getBoxes:se}=ss(),{loading:ae,freezers:W,getFreezers:oe}=es(),{loading:E,racks:N,getRacks:G}=os();ts();const{loading:ie,getBoxOccupancy:le}=Qt(),{showToast:R}=je(),y=C(1),ne=C(!1),de=C(null),q=C("file"),K=C(""),J=C([]),z=C(null),Q=O(()=>{var o;return(o=z.value)==null?void 0:o.template}),I=O(()=>!!$.editData),s=C({site_id:"",site_name:"",sample_category_id:"",sample_category_name:"",sample_serial_no:"",sample_label:"",collection_date:"",collection_time:"",researcher_info:"",field_collector_info:"",storage_location:{site:"",site_id:"",freezer:"",freezer_id:"",freezer_name:"",rack:"",rack_id:"",rack_name:"",box:"",box_id:"",box_name:"",position:0},free_fields:{diagnosis:"",treatmentStatus:"",outcomes:"",dateOfBirth:"",age:"",sex:"",ethnicity:"",nationality:"",history:"",riskFactors:"",geolocation:{country:"",state:"",lga:"",city:"",address:""}}}),Fe=O(()=>!n.value||n.value.length===0?[]:n.value.map(o=>o.cat_name||o.name||o.category_name)),De=O(()=>!S.value||S.value.length===0?[]:S.value.map(o=>o.site_name)),Le=O(()=>!W.value||W.value.length===0?[]:W.value.map(o=>o.freezer_name)),be=O(()=>!N.value||N.value.length===0?[]:N.value.map(o=>o.rack_name)),ze=O(()=>!T.value||T.value.length===0?[]:T.value.map(o=>o.box_name)),Ae=o=>{var d;const t=(d=n.value)==null?void 0:d.find(m=>(m.cat_name||m.name||m.category_name)===o);return(t==null?void 0:t.cat_id)||(t==null?void 0:t.id)||(t==null?void 0:t.category_id)||""},Me=C(["Male","Female","Other"]),r=C(["Yoruba","Igbo","Hausa","Fulani","Ijaw","Kanuri","Ibibio","Tiv","Edo","Nupe","Other"]),l=C(["Nigeria","Ghana","Kenya","South Africa","Other"]),h=C([]),A=C([]),w=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"],V=["Agege","Ajeromi-Ifelodun","Alimosho","Amuwo-Odofin","Apapa","Badagry","Epe","Eti-Osa","Ibeju-Lekki","Ifako-Ijaiye","Ikeja","Ikorodu","Kosofe","Lagos Island","Lagos Mainland","Mushin","Ojo","Oshodi-Isolo","Shomolu","Surulere"],j=C(null),x=()=>s.value.site_name,te=()=>s.value.storage_location.freezer_name,X=()=>s.value.storage_location.rack_name,pe=()=>s.value.storage_location.box_name,ke=async o=>{if((!I.value||s.value.storage_location.freezer_name==="")&&(s.value.storage_location.freezer_name="",s.value.storage_location.freezer_id="",s.value.storage_location.rack_name="",s.value.storage_location.rack_id="",s.value.storage_location.box_name="",s.value.storage_location.box_id="",s.value.storage_location.position=0,z.value=null),!o)return;const t=Ft(o);s.value.site_id=t,t&&await oe({site_id:t})},Ce=async o=>{if((!I.value||s.value.storage_location.rack_name==="")&&(s.value.storage_location.rack_name="",s.value.storage_location.rack_id="",s.value.storage_location.box_name="",s.value.storage_location.box_id="",s.value.storage_location.position=0,z.value=null),!o)return;const t=Dt(o);s.value.storage_location.freezer_id=t,s.value.site_id&&t&&await G({site_id:s.value.site_id,freezer_id:t})},Se=async o=>{if((!I.value||s.value.storage_location.box_name==="")&&(s.value.storage_location.box_name="",s.value.storage_location.box_id="",s.value.storage_location.position=0,z.value=null),!o)return;const t=Lt(o);s.value.storage_location.rack_id=t,s.value.site_id&&s.value.storage_location.freezer_id&&t&&await se({site_id:s.value.site_id,freezer_id:s.value.storage_location.freezer_id,rack_id:t})},$e=async o=>{if(I.value||(s.value.storage_location.position=0),z.value=null,!o)return;const t=zt(o);if(s.value.storage_location.box_id=t,s.value.site_id&&s.value.storage_location.freezer_id&&s.value.storage_location.rack_id&&t){const d=await le({site_id:s.value.site_id,freezer_id:s.value.storage_location.freezer_id,rack_id:s.value.storage_location.rack_id,box_id:t});d&&(z.value=d)}},ye=o=>String.fromCharCode(64+o),fe=(o,t)=>{var d;return(o-1)*(((d=Q.value)==null?void 0:d.columns)||10)+t-1},$t=o=>{if(o==null||!Q.value)return"Select Position";const t=Q.value.columns,d=Math.floor(o/t)+1,m=o%t+1;return`${ye(d)}${m}`},Ue=(o,t)=>{if(!z.value)return!1;const d=fe(o,t);return I.value&&j.value===d?!1:z.value.occupancy[d]===1},Vt=(o,t)=>{Ue(o,t)||(s.value.storage_location.position=fe(o,t))},Bt=async o=>{var d,m,M;if(!o.storage_location)return;const t=o.site_id||o.storage_location.site;if(t&&(s.value.site_id=t,await oe({site_id:t})),o.storage_location.freezer){const i=o.storage_location.freezer;s.value.storage_location.freezer_id=i;const _=(d=W.value)==null?void 0:d.find(L=>L.freezer_id===i);s.value.storage_location.freezer_name=(_==null?void 0:_.freezer_name)||"",i&&t&&await G({site_id:t,freezer_id:i})}if(o.storage_location.rack){const i=o.storage_location.rack;s.value.storage_location.rack_id=i;const _=(m=N.value)==null?void 0:m.find(L=>L.rack_id===i);s.value.storage_location.rack_name=(_==null?void 0:_.rack_name)||"",i&&s.value.storage_location.freezer_id&&t&&await se({site_id:t,freezer_id:s.value.storage_location.freezer_id,rack_id:i})}if(o.storage_location.box){const i=o.storage_location.box;s.value.storage_location.box_id=i;const _=(M=T.value)==null?void 0:M.find(L=>L.box_id===i);if(s.value.storage_location.box_name=(_==null?void 0:_.box_name)||"",i&&s.value.storage_location.rack_id&&s.value.storage_location.freezer_id&&t){const L=await le({site_id:t,freezer_id:s.value.storage_location.freezer_id,rack_id:s.value.storage_location.rack_id,box_id:i});L&&(z.value=L)}}o.storage_location.position&&(s.value.storage_location.position=o.storage_location.position,j.value=o.storage_location.position)},Ft=o=>{var d;const t=(d=S.value)==null?void 0:d.find(m=>(m.site_name||m.name)===o);return(t==null?void 0:t.site_id)||(t==null?void 0:t.id)||""},Dt=o=>{var d;const t=(d=W.value)==null?void 0:d.find(m=>(m.freezer_name||m.name)===o);return(t==null?void 0:t.freezer_id)||(t==null?void 0:t.id)||""},Lt=o=>{var d;const t=(d=N.value)==null?void 0:d.find(m=>(m.rack_name||m.name)===o);return(t==null?void 0:t.rack_id)||(t==null?void 0:t.id)||""},zt=o=>{var d;const t=(d=T.value)==null?void 0:d.find(m=>(m.box_name||m.name)===o);return(t==null?void 0:t.box_id)||(t==null?void 0:t.id)||""},He=async o=>{var i,_,L,he,ce,Ve,Ke,We,Je,Ye,qe,Qe,Xe,et,tt,st,ot,lt,at,it,nt,rt,dt,ct,ut,mt,pt,gt,ft,xt;const t=(i=S.value)==null?void 0:i.find(Ie=>Ie.site_id===o.site_id),d=(t==null?void 0:t.site_name)||"",m=(_=n.value)==null?void 0:_.find(Ie=>Ie.cat_id===o.sample_category_id),M=(m==null?void 0:m.cat_name)||"";s.value={site_id:o.site_id||"",site_name:d,sample_category_id:o.sample_category_id||"",sample_category_name:M,sample_serial_no:o.sample_serial_no||"",sample_label:o.sample_label||"",collection_date:o.collection_date||"",collection_time:o.collection_time||"",researcher_info:o.researcher_info||"",field_collector_info:o.field_collector_info||"",storage_location:{site:((L=o.storage_location)==null?void 0:L.site)||o.site_id||"",site_id:o.site_id||"",freezer:((he=o.storage_location)==null?void 0:he.freezer)||"",freezer_id:((ce=o.storage_location)==null?void 0:ce.freezer)||"",freezer_name:"",rack:((Ve=o.storage_location)==null?void 0:Ve.rack)||"",rack_id:((Ke=o.storage_location)==null?void 0:Ke.rack)||"",rack_name:"",box:((We=o.storage_location)==null?void 0:We.box)||"",box_id:((Je=o.storage_location)==null?void 0:Je.box)||"",box_name:"",position:((Ye=o.storage_location)==null?void 0:Ye.position)||0},free_fields:{diagnosis:((qe=o.free_fields)==null?void 0:qe.diagnosis)||"",treatmentStatus:((Qe=o.free_fields)==null?void 0:Qe.treatmentStatus)||"",outcomes:((Xe=o.free_fields)==null?void 0:Xe.outcomes)||"",dateOfBirth:((et=o.free_fields)==null?void 0:et.dateOfBirth)||"",age:((tt=o.free_fields)==null?void 0:tt.age)||"",sex:((st=o.free_fields)==null?void 0:st.sex)||"",ethnicity:((ot=o.free_fields)==null?void 0:ot.ethnicity)||"",nationality:((lt=o.free_fields)==null?void 0:lt.nationality)||"",history:((at=o.free_fields)==null?void 0:at.history)||"",riskFactors:((it=o.free_fields)==null?void 0:it.riskFactors)||"",geolocation:{country:((rt=(nt=o.free_fields)==null?void 0:nt.geolocation)==null?void 0:rt.country)||"",state:((ct=(dt=o.free_fields)==null?void 0:dt.geolocation)==null?void 0:ct.state)||"",lga:((mt=(ut=o.free_fields)==null?void 0:ut.geolocation)==null?void 0:mt.lga)||"",city:((gt=(pt=o.free_fields)==null?void 0:pt.geolocation)==null?void 0:gt.city)||"",address:((xt=(ft=o.free_fields)==null?void 0:ft.geolocation)==null?void 0:xt.address)||""}}},s.value.free_fields.geolocation.country==="Nigeria"&&(h.value=w),s.value.free_fields.geolocation.state==="Lagos"&&(A.value=V),await Bt(o)};xe(()=>$.editData,o=>{o&&He(o)},{immediate:!0}),xe(()=>$.modelValue,async o=>{o?(await Promise.all([B(),a()]),$.editData&&await He($.editData)):j.value=null});const At=()=>{if(!s.value.free_fields.dateOfBirth){s.value.free_fields.age="";return}const o=new Date(s.value.free_fields.dateOfBirth),t=new Date;let d=t.getFullYear()-o.getFullYear();const m=t.getMonth()-o.getMonth();(m<0||m===0&&t.getDate()<o.getDate())&&d--,s.value.free_fields.age=d.toString()},Mt=()=>{s.value.free_fields.geolocation.state="",s.value.free_fields.geolocation.lga="",s.value.free_fields.geolocation.country==="Nigeria"?h.value=w:h.value=[],A.value=[]},Ut=()=>{s.value.free_fields.geolocation.lga="",s.value.free_fields.geolocation.state==="Lagos"?A.value=V:A.value=[]},Tt=()=>{var o;(o=de.value)==null||o.click()},Nt=async o=>{const t=o.target;t.files&&(await Pe(Array.from(t.files)),t.value="")},It=async o=>{var t;ne.value=!1,(t=o.dataTransfer)!=null&&t.files&&await Pe(Array.from(o.dataTransfer.files))},Pe=async o=>{for(const t of o){if(t.size>10*1024*1024){R({title:"Warning",message:`File ${t.name} exceeds the 10MB size limit.`,toastType:"warning",duration:3e3});continue}const d={file:t,name:t.name,size:t.size,type:t.type,isUrl:!1};t.type.startsWith("image/")?d.preview=await Ot(t):t.type==="application/pdf"&&(d.preview=null),J.value.push(d)}},Ot=o=>new Promise((t,d)=>{const m=new FileReader;m.onload=M=>{var i;return t((i=M.target)==null?void 0:i.result)},m.onerror=d,m.readAsDataURL(o)}),Ge=async()=>{if(K.value)try{const o=new URL(K.value);J.value.push({file:null,name:o.pathname.split("/").pop()||"image-from-url",size:0,type:"image/url",preview:K.value,isUrl:!0,url:K.value}),K.value=""}catch{R({title:"Warning",message:"Please enter a valid URL",toastType:"warning",duration:3e3})}},Et=o=>{J.value.splice(o,1)},Rt=o=>{if(o===0)return"0 Bytes";const t=1024,d=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(o)/Math.log(t));return Math.round(o/Math.pow(t,m)*100)/100+" "+d[m]},jt=o=>o.startsWith("image/")||o==="image/url"?"heroicons:photo":o==="application/pdf"?"heroicons:document-text":o.includes("sheet")||o.includes("csv")?"heroicons:table-cells":(o.includes("word")||o.includes("document"),"heroicons:document"),Ht=o=>o.startsWith("image/")||o==="image/url"?"Image":o==="application/pdf"?"PDF":o.includes("sheet")?"Excel":o.includes("csv")?"CSV":o.includes("word")?"Word Document":"Document",Pt=o=>{if(o.file){const t=new Blob([o.file],{type:o.type}),d=URL.createObjectURL(t);window.open(d,"_blank")}},Ze=o=>{if(o===1){if(!s.value.sample_serial_no||!s.value.sample_category_name||!s.value.sample_label||!s.value.collection_date||!s.value.collection_time||!s.value.researcher_info||!s.value.field_collector_info)return R({title:"Warning",message:"Please fill in all required fields",toastType:"warning",duration:3e3}),!1}else if(o===2){if(!s.value.site_name||!s.value.storage_location.freezer_name||!s.value.storage_location.rack_name||!s.value.storage_location.box_name||s.value.storage_location.position===null||s.value.storage_location.position===void 0)return R({title:"Warning",message:"Please complete all storage location fields and select a position",toastType:"warning",duration:3e3}),!1}else if(o===3){const t=s.value.free_fields.diagnosis||s.value.free_fields.treatmentStatus||s.value.free_fields.outcomes,d=s.value.free_fields.dateOfBirth||s.value.free_fields.sex||s.value.free_fields.ethnicity||s.value.free_fields.nationality,m=s.value.free_fields.history||s.value.free_fields.riskFactors||s.value.free_fields.geolocation.country;if(!t)return R({title:"Warning",message:"Please fill in at least one Clinical Data field (Diagnosis, Treatment Status, or Outcomes)",toastType:"warning",duration:3e3}),!1;if(!d)return R({title:"Warning",message:"Please fill in at least one Demographic Data field (Date of Birth, Gender, Ethnicity, or Nationality)",toastType:"warning",duration:3e3}),!1;if(!m)return R({title:"Warning",message:"Please fill in at least one Epidemiological Data field (History, Risk Factors, or Geolocation)",toastType:"warning",duration:3e3}),!1}return!0},Gt=()=>{Ze(y.value)&&y.value<4&&(y.value++,window.scrollTo({top:0,behavior:"smooth"}))},Zt=()=>{y.value>1&&(y.value--,window.scrollTo({top:0,behavior:"smooth"}))},Te=()=>{s.value={site_id:"",site_name:"",sample_category_id:"",sample_category_name:"",sample_serial_no:"",sample_label:"",collection_date:"",collection_time:"",researcher_info:"",field_collector_info:"",storage_location:{site:"",site_id:"",freezer:"",freezer_id:"",freezer_name:"",rack:"",rack_id:"",rack_name:"",box:"",box_id:"",box_name:"",position:0},free_fields:{diagnosis:"",treatmentStatus:"",outcomes:"",dateOfBirth:"",age:"",sex:"",ethnicity:"",nationality:"",history:"",riskFactors:"",geolocation:{country:"",state:"",lga:"",city:"",address:""}}},J.value=[],q.value="file",K.value="",h.value=[],A.value=[],z.value=null,j.value=null},Ne=()=>{p.value||(y.value=1,Te(),Z("update:modelValue",!1))},Kt=async()=>{var M,i;if(!Ze(y.value))return;const o=Ae(s.value.sample_category_name),t=_=>{if(!_)return null;const[L,he]=_.split(" ");let[ce,Ve]=L.split(":");return ce==="12"&&(ce="00"),he==="PM"&&(ce=(parseInt(ce,10)+12).toString()),`${ce.toString().padStart(2,"0")}:${Ve}:00`},d={site_id:s.value.site_id,sample_category_id:o,sample_serial_no:s.value.sample_serial_no,sample_label:s.value.sample_label,collection_date:s.value.collection_date,collection_time:t(s.value.collection_time),researcher_info:s.value.researcher_info,field_collector_info:s.value.field_collector_info,storage_location:{site:s.value.site_id,freezer:s.value.storage_location.freezer_id,rack:s.value.storage_location.rack_id,box:s.value.storage_location.box_id,position:s.value.storage_location.position},free_fields:s.value.free_fields,files:J.value.map(_=>({name:_.name,size:_.size,type:_.type,data:_.file,url:_.url,isUrl:_.isUrl})),...I.value&&((M=$.editData)!=null&&M.uuid)?{uuid:$.editData.uuid}:{}};if(I.value){b.value=!0;const _=await re((i=$==null?void 0:$.editData)==null?void 0:i.uuid,d);b.value=!1,_&&(Z("saved",{..._,isEdit:!0}),y.value=1,Te(),Z("update:modelValue",!1));return}const m=await k(d);m&&(Z("saved",{...m,isEdit:I.value}),y.value=1,Te(),Z("update:modelValue",!1))};return(o,t)=>{const d=wt("Icon"),m=yt,M=bt;return u(),ge(ht,{to:"body"},[g(me,{name:"modal"},{default:ue(()=>[o.modelValue?(u(),f("div",{key:0,class:"fixed inset-0 flex items-center justify-center z-[9999] bg-black/50 bg-black/50 backdrop-blur-lg p-2 sm:p-4",onClick:_e(Ne,["self"])},[e("div",ns,[e("div",rs,[e("div",ds,[e("div",cs,[t[31]||(t[31]=e("div",{class:"w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center"},[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M12.75 20.25V15.75H15.75L12 11.25L8.25 15.75H11.25V20.25H7.5V20.2125C7.374 20.22 7.254 20.25 7.125 20.25C5.63316 20.25 4.20242 19.6574 3.14752 18.6025C2.09263 17.5476 1.5 16.1168 1.5 14.625C1.5 11.739 3.6825 9.387 6.483 9.0645C6.72854 7.78094 7.41368 6.62306 8.42057 5.79001C9.42746 4.95696 10.6932 4.5008 12 4.5C13.307 4.50072 14.5729 4.95682 15.5801 5.78985C16.5872 6.62289 17.2727 7.78081 17.5185 9.0645C20.319 9.387 22.4985 11.739 22.4985 14.625C22.4985 16.1168 21.9059 17.5476 20.851 18.6025C19.7961 19.6574 18.3653 20.25 16.8735 20.25C16.7475 20.25 16.626 20.22 16.4985 20.2125V20.25H12.75Z",fill:"#005B8F"})])],-1)),e("h2",us,v(I.value?"Edit Biospecimen":"Register New Biospecimen"),1)]),e("button",{onClick:Ne,class:"text-gray-400 hover:text-gray-600 transition p-2 hover:bg-gray-100 rounded-lg flex-shrink-0",disabled:c(p)},[g(d,{name:"heroicons:x-mark",class:"w-5 h-5 sm:w-6 sm:h-6"})],8,ms)])]),e("div",ps,[e("div",gs,[e("div",fs,[e("div",xs,[e("div",vs,[e("div",{class:H(["w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center font-bold text-sm sm:text-base md:text-lg transition-all duration-300",y.value>=1?"bg-[#005B8F] text-white shadow-lg scale-110":"bg-gray-200 text-gray-600"])},[y.value>1?(u(),ge(d,{key:0,name:"heroicons:check",class:"w-4 h-4 sm:w-5 sm:h-5 md:w-7 md:h-7"})):(u(),f("span",_s,"1"))],2),t[32]||(t[32]=e("span",{class:"mt-1 sm:mt-2 text-[10px] sm:text-xs md:text-sm font-medium text-gray-700 text-center"},"Basic",-1))]),e("div",bs,[e("div",{class:H(["h-full rounded-full transition-all duration-500",y.value>=2?"bg-[#005B8F]":"bg-gray-200"])},null,2)]),e("div",ys,[e("div",{class:H(["w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center font-bold text-sm sm:text-base md:text-lg transition-all duration-300",y.value>=2?"bg-[#005B8F] text-white shadow-lg scale-110":"bg-gray-200 text-gray-600"])},[y.value>2?(u(),ge(d,{key:0,name:"heroicons:check",class:"w-4 h-4 sm:w-5 sm:h-5 md:w-7 md:h-7"})):(u(),f("span",hs,"2"))],2),t[33]||(t[33]=e("span",{class:"mt-1 sm:mt-2 text-[10px] sm:text-xs md:text-sm font-medium text-gray-700 text-center"},"Storage",-1))]),e("div",ws,[e("div",{class:H(["h-full rounded-full transition-all duration-500",y.value>=3?"bg-[#005B8F]":"bg-gray-200"])},null,2)]),e("div",ks,[e("div",{class:H(["w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center font-bold text-sm sm:text-base md:text-lg transition-all duration-300",y.value>=3?"bg-[#005B8F] text-white shadow-lg scale-110":"bg-gray-200 text-gray-600"])},[y.value>3?(u(),ge(d,{key:0,name:"heroicons:check",class:"w-4 h-4 sm:w-5 sm:h-5 md:w-7 md:h-7"})):(u(),f("span",Cs,"3"))],2),t[34]||(t[34]=e("span",{class:"mt-1 sm:mt-2 text-[10px] sm:text-xs md:text-sm font-medium text-gray-700 text-center"},"MetaData",-1))]),e("div",Ss,[e("div",{class:H(["h-full rounded-full transition-all duration-500",y.value>=4?"bg-[#005B8F]":"bg-gray-200"])},null,2)]),e("div",$s,[e("div",{class:H(["w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center font-bold text-sm sm:text-base md:text-lg transition-all duration-300",y.value>=4?"bg-[#005B8F] text-white shadow-lg scale-110":"bg-gray-200 text-gray-600"])}," 4 ",2),t[35]||(t[35]=e("span",{class:"mt-1 sm:mt-2 text-[10px] sm:text-xs md:text-sm font-medium text-gray-700 text-center"},"Sample Files",-1))])])]),g(me,{name:"fade",mode:"out-in"},{default:ue(()=>[y.value===1?(u(),f("div",Vs,[t[36]||(t[36]=e("h3",{class:"text-base sm:text-lg font-medium text-[#033958] border-b-[0.5px] pb-2 sm:pb-3"},"Basic Information",-1)),e("div",Bs,[e("div",null,[g(m,{modelValue:s.value.sample_serial_no,"onUpdate:modelValue":t[0]||(t[0]=i=>s.value.sample_serial_no=i),type:"text",label:"Sample Serial No",disabled:c(p)},null,8,["modelValue","disabled"])]),e("div",null,[g(M,{label:"Sample Category",options:Fe.value,position:"standalone",modelValue:s.value.sample_category_name,"onUpdate:modelValue":t[1]||(t[1]=i=>s.value.sample_category_name=i),disabled:c(p)||c(ee)},null,8,["options","modelValue","disabled"])]),e("div",null,[g(m,{label:"Sample Label",modelValue:s.value.sample_label,"onUpdate:modelValue":t[2]||(t[2]=i=>s.value.sample_label=i),type:"text",disabled:c(p)},null,8,["modelValue","disabled"])]),e("div",null,[g(m,{modelValue:s.value.collection_date,"onUpdate:modelValue":t[3]||(t[3]=i=>s.value.collection_date=i),type:"date",disabled:c(p),label:"Collection Date"},null,8,["modelValue","disabled"])]),e("div",null,[g(m,{modelValue:s.value.collection_time,"onUpdate:modelValue":t[4]||(t[4]=i=>s.value.collection_time=i),label:"Collection Time",type:"time",disabled:c(p)},null,8,["modelValue","disabled"])]),e("div",null,[g(m,{modelValue:s.value.researcher_info,"onUpdate:modelValue":t[5]||(t[5]=i=>s.value.researcher_info=i),type:"text",label:"Researcher Information",disabled:c(p)},null,8,["modelValue","disabled"])]),e("div",null,[g(m,{modelValue:s.value.field_collector_info,"onUpdate:modelValue":t[6]||(t[6]=i=>s.value.field_collector_info=i),type:"text",label:"Field Collector Information",disabled:c(p)},null,8,["modelValue","disabled"])])])])):D("",!0)]),_:1}),g(me,{name:"fade",mode:"out-in"},{default:ue(()=>{var i;return[y.value===2?(u(),f("div",Fs,[t[46]||(t[46]=e("h3",{class:"text-base sm:text-lg font-medium text-[#033958] border-b-[0.5px] pb-2 sm:pb-3"},"Storage Location",-1)),e("div",Ds,[e("div",null,[g(M,{label:"Site",options:De.value,position:"standalone",modelValue:s.value.site_name,"onUpdate:modelValue":[t[7]||(t[7]=_=>s.value.site_name=_),ke],disabled:c(p)||c(P)},null,8,["options","modelValue","disabled"])]),e("div",null,[g(M,{label:"Freezer",options:Le.value,position:"standalone",modelValue:s.value.storage_location.freezer_name,"onUpdate:modelValue":[t[8]||(t[8]=_=>s.value.storage_location.freezer_name=_),Ce],disabled:c(p)||c(ae)||!s.value.site_name},null,8,["options","modelValue","disabled"])]),e("div",null,[g(M,{label:"Rack",options:be.value,position:"standalone",modelValue:s.value.storage_location.rack_name,"onUpdate:modelValue":[t[9]||(t[9]=_=>s.value.storage_location.rack_name=_),Se],disabled:c(p)||c(E)||!s.value.storage_location.freezer_name},null,8,["options","modelValue","disabled"])]),e("div",null,[g(M,{label:"Box",options:ze.value,position:"standalone",modelValue:s.value.storage_location.box_name,"onUpdate:modelValue":[t[10]||(t[10]=_=>s.value.storage_location.box_name=_),$e],disabled:c(p)||c(U)||!s.value.storage_location.rack_name},null,8,["options","modelValue","disabled"])])]),s.value.storage_location.box_name?(u(),f("div",Ls,[t[43]||(t[43]=e("label",{class:"block text-xs sm:text-sm font-semibold text-gray-700 mb-2 sm:mb-3"},[we(" Select Position "),e("span",{class:"text-red-500"},"*")],-1)),e("div",zs,[e("div",As,[e("span",null,v(x()||"Select Site"),1),g(d,{name:"heroicons:chevron-right",class:"w-2 h-2 sm:w-3 sm:h-3"}),e("span",null,v(te()||"Select Freezer"),1),g(d,{name:"heroicons:chevron-right",class:"w-2 h-2 sm:w-3 sm:h-3"}),e("span",null,v(X()||"Select Rack"),1),g(d,{name:"heroicons:chevron-right",class:"w-2 h-2 sm:w-3 sm:h-3"}),e("span",null,v(pe()||"Select Box"),1),g(d,{name:"heroicons:chevron-right",class:"w-2 h-2 sm:w-3 sm:h-3"}),e("span",Ms,v($t(s.value.storage_location.position)),1)])]),c(ie)?(u(),f("div",Us,t[37]||(t[37]=[e("svg",{class:"animate-spin h-8 w-8 text-[#005B8F] mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-2 text-sm text-gray-600"},"Loading box occupancy...",-1)]))):Q.value?(u(),f("div",Ts,[e("div",Ns,[e("div",{class:"grid gap-1 sm:gap-2 mb-4 sm:mb-6",style:Jt({gridTemplateColumns:`repeat(${Q.value.columns}, minmax(0, 1fr))`})},[(u(!0),f(ve,null,Be(Q.value.rows,_=>(u(),f(ve,{key:_},[(u(!0),f(ve,null,Be(Q.value.columns,L=>(u(),f("button",{key:`${_}-${L}`,type:"button",onClick:he=>Vt(_,L),class:H(["w-full aspect-square text-[10px] sm:text-xs font-semibold rounded-lg border-[0.5px] transition-all duration-200 transform hover:scale-105",s.value.storage_location.position===fe(_,L)?"bg-[#005B8F] text-white border-blue-700 shadow-lg scale-110":Ue(_,L)?"bg-gray-300 text-gray-500 border-gray-100 cursor-not-allowed opacity-60":"bg-white text-gray-700 border-gray-100 hover:border-blue-400 hover:shadow-md"]),disabled:Ue(_,L)||c(p)},v(ye(_))+v(L),11,Is))),128))],64))),128))],4)])])):D("",!0),(i=z.value)!=null&&i.statistics?(u(),f("div",Os,[t[42]||(t[42]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-3"},"Box Statistics",-1)),e("div",Es,[e("div",Rs,[t[38]||(t[38]=e("p",{class:"text-xs text-gray-600"},"Total",-1)),e("p",js,v(z.value.statistics.total_positions),1)]),e("div",Hs,[t[39]||(t[39]=e("p",{class:"text-xs text-gray-600"},"Occupied",-1)),e("p",Ps,v(z.value.statistics.occupied),1)]),e("div",Gs,[t[40]||(t[40]=e("p",{class:"text-xs text-gray-600"},"Available",-1)),e("p",Zs,v(z.value.statistics.available),1)]),e("div",Ks,[t[41]||(t[41]=e("p",{class:"text-xs text-gray-600"},"Utilization",-1)),e("p",Ws,v(z.value.statistics.utilization_percentage)+"%",1)])])])):D("",!0),t[44]||(t[44]=e("div",{class:"flex flex-wrap gap-3 sm:gap-6 text-xs sm:text-sm bg-white p-3 sm:p-4 rounded-lg border-[0.5px] border-gray-50 mt-4"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-white border-[0.5px] border-gray-300 rounded-lg flex-shrink-0"}),e("span",{class:"text-gray-700"},"Available")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-gray-300 border-[0.5px] border-gray-400 rounded-lg flex-shrink-0"}),e("span",{class:"text-gray-700"},"Occupied")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-[#005B8F] border-[0.5px] border-blue-700 rounded-lg flex-shrink-0"}),e("span",{class:"text-gray-700"},"Selected")])],-1))])):(u(),f("div",Js,[g(d,{name:"heroicons:archive-box",class:"w-12 h-12 text-gray-300 mx-auto mb-2"}),t[45]||(t[45]=e("p",{class:"text-sm text-gray-600"},"Select a box to view available positions",-1))]))])):D("",!0)]}),_:1}),g(me,{name:"fade",mode:"out-in"},{default:ue(()=>[y.value===3?(u(),f("div",Ys,[e("div",null,[t[47]||(t[47]=e("h3",{class:"text-xs sm:text-sm font-medium text-[#033958] border-b-[0.5px] pb-2 sm:pb-3 mb-3 sm:mb-5"},[we(" Clinical Data "),e("span",{class:"text-red-500"},"*")],-1)),e("div",qs,[e("div",null,[g(m,{modelValue:s.value.free_fields.diagnosis,"onUpdate:modelValue":t[11]||(t[11]=i=>s.value.free_fields.diagnosis=i),type:"text",label:"Diagnosis",disabled:c(p)},null,8,["modelValue","disabled"])]),e("div",null,[g(m,{modelValue:s.value.free_fields.treatmentStatus,"onUpdate:modelValue":t[12]||(t[12]=i=>s.value.free_fields.treatmentStatus=i),type:"text",label:"Treatment Status",disabled:c(p)},null,8,["modelValue","disabled"])]),e("div",Qs,[g(m,{modelValue:s.value.free_fields.outcomes,"onUpdate:modelValue":t[13]||(t[13]=i=>s.value.free_fields.outcomes=i),label:"Outcomes",rows:6,type:"textarea",disabled:c(p)},null,8,["modelValue","disabled"])])])]),e("div",null,[t[48]||(t[48]=e("h3",{class:"text-xs sm:text-sm font-medium text-[#033958] border-b-[0.5px] pb-2 sm:pb-3 mb-3 sm:mb-5"},[we(" Demographic Data "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Xs,[e("div",null,[g(m,{modelValue:s.value.free_fields.dateOfBirth,"onUpdate:modelValue":[t[14]||(t[14]=i=>s.value.free_fields.dateOfBirth=i),At],type:"date",label:"Date of birth",disabled:c(p)},null,8,["modelValue","disabled"])]),e("div",null,[g(m,{modelValue:s.value.free_fields.age,"onUpdate:modelValue":t[15]||(t[15]=i=>s.value.free_fields.age=i),type:"number",label:"Age",disabled:!0,readonly:""},null,8,["modelValue"])]),e("div",null,[g(M,{label:"Gender",options:Me.value,position:"standalone",modelValue:s.value.free_fields.sex,"onUpdate:modelValue":t[16]||(t[16]=i=>s.value.free_fields.sex=i),disabled:c(p)},null,8,["options","modelValue","disabled"])]),e("div",null,[g(M,{label:"Ethnicity",options:r.value,position:"standalone",modelValue:s.value.free_fields.ethnicity,"onUpdate:modelValue":t[17]||(t[17]=i=>s.value.free_fields.ethnicity=i),disabled:c(p)},null,8,["options","modelValue","disabled"])]),e("div",eo,[g(m,{modelValue:s.value.free_fields.nationality,"onUpdate:modelValue":t[18]||(t[18]=i=>s.value.free_fields.nationality=i),type:"text",label:"Nationality",disabled:c(p)},null,8,["modelValue","disabled"])])])]),e("div",null,[t[50]||(t[50]=e("h3",{class:"text-xs sm:text-sm font-medium text-[#033958] border-b-[0.5px] pb-2 sm:pb-3 mb-3 sm:mb-5"},[we(" Epidemiological Data "),e("span",{class:"text-red-500"},"*")],-1)),e("div",to,[e("div",null,[g(m,{modelValue:s.value.free_fields.history,"onUpdate:modelValue":t[19]||(t[19]=i=>s.value.free_fields.history=i),rows:3,type:"textarea",label:"History",disabled:c(p)},null,8,["modelValue","disabled"])]),e("div",null,[g(m,{modelValue:s.value.free_fields.riskFactors,"onUpdate:modelValue":t[20]||(t[20]=i=>s.value.free_fields.riskFactors=i),rows:3,label:"Risk Factors",type:"textarea",disabled:c(p)},null,8,["modelValue","disabled"])]),e("div",null,[t[49]||(t[49]=e("h4",{class:"text-xs sm:text-sm font-semibold text-gray-700 mb-3"},"Geolocation",-1)),e("div",so,[e("div",null,[g(M,{label:"Country",options:l.value,position:"standalone",modelValue:s.value.free_fields.geolocation.country,"onUpdate:modelValue":[t[21]||(t[21]=i=>s.value.free_fields.geolocation.country=i),Mt],disabled:c(p)},null,8,["options","modelValue","disabled"])]),e("div",null,[g(M,{label:"State/Province",options:h.value,position:"standalone",modelValue:s.value.free_fields.geolocation.state,"onUpdate:modelValue":[t[22]||(t[22]=i=>s.value.free_fields.geolocation.state=i),Ut],disabled:c(p)||!s.value.free_fields.geolocation.country},null,8,["options","modelValue","disabled"])]),e("div",null,[g(M,{label:"LGA/District",options:A.value,position:"standalone",modelValue:s.value.free_fields.geolocation.lga,"onUpdate:modelValue":t[23]||(t[23]=i=>s.value.free_fields.geolocation.lga=i),disabled:c(p)||!s.value.free_fields.geolocation.state},null,8,["options","modelValue","disabled"])]),e("div",null,[g(m,{modelValue:s.value.free_fields.geolocation.city,"onUpdate:modelValue":t[24]||(t[24]=i=>s.value.free_fields.geolocation.city=i),type:"text",label:"City",disabled:c(p)},null,8,["modelValue","disabled"])]),e("div",oo,[g(m,{modelValue:s.value.free_fields.geolocation.address,"onUpdate:modelValue":t[25]||(t[25]=i=>s.value.free_fields.geolocation.address=i),rows:2,label:"Address",disabled:c(p)},null,8,["modelValue","disabled"])])])])])])])):D("",!0)]),_:1}),g(me,{name:"fade",mode:"out-in"},{default:ue(()=>[y.value===4?(u(),f("div",lo,[t[55]||(t[55]=e("h3",{class:"text-base sm:text-lg font-medium text-[#033958] border-b-[0.5px] pb-2 sm:pb-3"},"Sample Files & Documents (Optional)",-1)),e("div",ao,[t[54]||(t[54]=e("p",{class:"text-xs sm:text-sm text-gray-600"}," Upload any relevant files such as images, PDFs, CSV data files, or other documents related to this biospecimen. ",-1)),e("div",io,[e("button",{type:"button",onClick:t[26]||(t[26]=i=>q.value="file"),class:H(["px-4 py-2 text-sm font-medium transition-colors relative",q.value==="file"?"text-[#005B8F] border-b-2 border-[#005B8F]":"text-gray-500 hover:text-gray-700"])}," Upload Files ",2),e("button",{type:"button",onClick:t[27]||(t[27]=i=>q.value="url"),class:H(["px-4 py-2 text-sm font-medium transition-colors relative",q.value==="url"?"text-[#005B8F] border-b-2 border-[#005B8F]":"text-gray-500 hover:text-gray-700"])}," Add from URL ",2)]),Oe(e("div",{onClick:Tt,onDragover:t[28]||(t[28]=_e(i=>ne.value=!0,["prevent"])),onDragleave:t[29]||(t[29]=_e(i=>ne.value=!1,["prevent"])),onDrop:_e(It,["prevent"]),class:H(["border-2 border-dashed rounded-xl p-4 sm:p-6 md:p-8 text-center cursor-pointer transition-all duration-300",ne.value?"border-[#005B8F] bg-blue-50":"border-gray-300 hover:border-[#005B8F] hover:bg-gray-50"])},[e("div",no,[e("div",ro,[g(d,{name:"heroicons:cloud-arrow-up",class:"w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-[#005B8F]"})]),t[51]||(t[51]=e("div",null,[e("p",{class:"text-sm sm:text-base md:text-lg font-medium text-gray-700 mb-1"}," Click to upload or drag and drop "),e("p",{class:"text-xs sm:text-sm text-gray-500"}," Images, PDFs, CSV, Excel, Documents (Max 10MB per file) ")],-1)),e("input",{ref_key:"fileInput",ref:de,type:"file",multiple:"",accept:"image/*,.pdf,.csv,.xlsx,.xls,.doc,.docx,.txt",onChange:Nt,class:"hidden",disabled:c(p)},null,40,co)])],34),[[vt,q.value==="file"]]),Oe(e("div",uo,[e("div",null,[g(m,{modelValue:K.value,"onUpdate:modelValue":t[30]||(t[30]=i=>K.value=i),label:"Image URL",type:"url",disabled:c(p),onKeyup:Yt(Ge,["enter"])},null,8,["modelValue","disabled"])]),e("button",{onClick:Ge,type:"button",disabled:!K.value||c(p),class:"px-4 py-2 bg-[#005B8F] text-white rounded-lg hover:bg-[#004670] disabled:bg-gray-300 disabled:cursor-not-allowed transition-all text-sm font-medium"}," Add Image ",8,mo)],512),[[vt,q.value==="url"]]),J.value.length>0?(u(),f("div",po,[e("h4",go," Uploaded Files ("+v(J.value.length)+") ",1),e("div",fo,[(u(!0),f(ve,null,Be(J.value,(i,_)=>(u(),f("div",{key:_,class:"border border-gray-200 rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow"},[e("div",xo,[e("div",vo,[i.preview&&(i.type.startsWith("image/")||i.isUrl)?(u(),f("div",_o,[e("img",{src:i.preview,alt:i.name,class:"w-full h-full object-cover"},null,8,bo)])):(u(),f("div",yo,[g(d,{name:jt(i.type),class:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 text-gray-500"},null,8,["name"])]))]),e("div",ho,[e("p",{class:"text-xs sm:text-sm font-medium text-gray-900 truncate",title:i.name},v(i.name),9,wo),e("p",ko,v(i.isUrl?"From URL":Rt(i.size))+" â€¢ "+v(Ht(i.type)),1),i.preview&&i.type==="application/pdf"?(u(),f("div",Co,[e("button",{onClick:L=>Pt(i),type:"button",class:"text-[10px] sm:text-xs text-[#005B8F] hover:underline flex items-center gap-1"},[g(d,{name:"heroicons:eye",class:"w-3 h-3"}),t[52]||(t[52]=we(" Preview PDF "))],8,So)])):D("",!0)]),e("button",{onClick:L=>Et(_),type:"button",class:"flex-shrink-0 p-1 sm:p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",disabled:c(p)},[g(d,{name:"heroicons:trash",class:"w-4 h-4 sm:w-5 sm:h-5"})],8,$o)])]))),128))])])):(u(),f("div",Vo,[g(d,{name:"heroicons:document",class:"w-10 h-10 sm:w-12 sm:h-12 text-gray-300 mx-auto mb-2"}),t[53]||(t[53]=e("p",{class:"text-xs sm:text-sm text-gray-500"},"No files uploaded yet",-1))]))])])):D("",!0)]),_:1})])]),e("div",Bo,[e("div",Fo,[y.value>1?(u(),f("button",{key:0,type:"button",onClick:Zt,class:"px-3 py-2 sm:px-4 sm:py-2.5 md:px-6 md:py-3 border-[0.5px] border-gray-50 bg-white rounded-lg hover:bg-gray-50 transition-all font-medium flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",disabled:c(p)},t[56]||(t[56]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 sm:w-5 sm:h-5"},[e("path",{d:"M13.9796 6L15.3896 7.41L10.8096 12L15.3896 16.59L13.9796 18L7.97965 12L13.9796 6Z",fill:"#005B8F"})],-1),e("span",{class:"hidden sm:inline"},"Back",-1)]),8,Do)):(u(),f("button",{key:1,type:"button",onClick:Ne,class:"px-3 py-2 sm:px-4 sm:py-2.5 md:px-6 md:py-3 border-[0.5px] border-gray-50 rounded-lg hover:bg-gray-50 transition-all font-medium text-xs sm:text-sm",disabled:c(p)}," Cancel ",8,Lo)),y.value<4?(u(),f("button",{key:2,type:"button",onClick:Gt,class:"px-3 py-2 sm:px-4 sm:py-2.5 md:px-6 md:py-3 bg-[#005B8F] text-white rounded-lg transition-all font-medium flex items-center gap-1 sm:gap-2 shadow-lg text-xs sm:text-sm",disabled:c(p)},t[57]||(t[57]=[e("span",null,"Next",-1),e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 sm:w-5 sm:h-5"},[e("path",{d:"M10.0204 6L8.61035 7.41L13.1904 12L8.61035 16.59L10.0204 18L16.0204 12L10.0204 6Z",fill:"white"})],-1)]),8,zo)):(u(),f("button",{key:3,type:"button",onClick:Kt,class:"px-3 py-2 sm:px-4 sm:py-2.5 md:px-6 md:py-3 bg-[#005B8F] text-white rounded-lg transition-all font-medium flex items-center gap-1 sm:gap-2 shadow-lg text-xs sm:text-sm",disabled:c(p)},[c(p)?(u(),f("svg",Mo,t[58]||(t[58]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(u(),ge(d,{key:0,name:"heroicons:check",class:"w-4 h-4 sm:w-5 sm:h-5"})),e("span",Uo,v(c(p)?"Saving...":I.value?"Update":"Save"),1),e("span",To,v(c(p)?"...":I.value?"Update":"Save"),1)],8,Ao))])])])])):D("",!0)]),_:1})])}}}),Io=Re(No,[["__scopeId","data-v-fb39bd56"]]),Oo={class:"bg-white rounded-xl max-w-3xl w-full max-h-[95vh] sm:max-h-[90vh] shadow-2xl transform transition-all flex flex-col"},Eo={class:"p-4 sm:p-6 md:p-8 flex-shrink-0 border-b border-gray-100"},Ro={class:"flex items-center justify-between mb-4 sm:mb-6"},jo={class:"flex items-center gap-2 sm:gap-4"},Ho={class:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 sm:p-6 border border-blue-100"},Po={class:"flex flex-col items-center text-center"},Go={class:"text-xl sm:text-2xl font-bold text-gray-900 mb-2"},Zo={class:"inline-flex px-3 sm:px-4 py-1 sm:py-1.5 bg-green-100 text-green-700 rounded-full text-xs sm:text-sm font-medium"},Ko={class:"flex-1 overflow-y-auto p-4 sm:p-6 md:p-8"},Wo={class:"space-y-4 sm:space-y-6 mb-6 sm:mb-8"},Jo={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6"},Yo={class:"flex justify-between items-center py-2 sm:py-3 border-b border-gray-200"},qo={class:"text-xs sm:text-sm font-semibold text-gray-900"},Qo={class:"flex justify-between items-center py-2 sm:py-3 border-b border-gray-200"},Xo={class:"text-xs sm:text-sm font-semibold text-gray-900"},el={class:"flex justify-between items-center py-2 sm:py-3 border-b border-gray-200"},tl={class:"text-xs sm:text-sm font-semibold text-gray-900"},sl={class:"flex justify-between items-center py-2 sm:py-3 border-b border-gray-200"},ol={class:"text-xs sm:text-sm font-semibold text-gray-900"},ll={class:"flex justify-between items-center py-2 sm:py-3 border-b border-gray-200"},al={class:"text-xs sm:text-sm font-semibold text-gray-900"},il={class:"flex justify-between items-center py-2 sm:py-3 border-b border-gray-200"},nl={class:"text-xs sm:text-sm font-semibold text-gray-900"},rl={class:"md:col-span-2 flex justify-between items-center py-2 sm:py-3 border-b border-gray-200"},dl={class:"text-xs sm:text-sm font-semibold text-gray-900 text-right"},cl={class:"border-b border-gray-200 mb-4 sm:mb-6"},ul={class:"flex gap-4 sm:gap-8 overflow-x-auto"},ml={key:0,class:"space-y-4 sm:space-y-6"},pl={class:"space-y-3 sm:space-y-4"},gl={class:"flex justify-between items-start py-2 sm:py-3 border-b border-gray-100"},fl={class:"text-xs sm:text-sm text-gray-900 w-2/3 text-right"},xl={class:"flex justify-between items-start py-2 sm:py-3 border-b border-gray-100"},vl={class:"text-xs sm:text-sm text-gray-900 w-2/3 text-right"},_l={class:"flex justify-between items-start py-2 sm:py-3 border-b border-gray-100"},bl={class:"text-xs sm:text-sm text-gray-900 w-2/3 text-right"},yl={key:1,class:"space-y-4 sm:space-y-6"},hl={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6"},wl={class:"space-y-3 sm:space-y-4"},kl={class:"text-xs sm:text-sm font-semibold text-gray-900 mt-1"},Cl={class:"text-xs sm:text-sm font-semibold text-gray-900 mt-1"},Sl={class:"text-xs sm:text-sm font-semibold text-gray-900 mt-1"},$l={class:"space-y-3 sm:space-y-4"},Vl={class:"text-xs sm:text-sm font-semibold text-gray-900 mt-1"},Bl={class:"text-xs sm:text-sm font-semibold text-gray-900 mt-1"},Fl={key:2,class:"space-y-4 sm:space-y-6"},Dl={key:0,class:"space-y-3 sm:space-y-4"},Ll={key:0},zl={class:"text-xs sm:text-sm text-gray-900 mt-1"},Al={key:1},Ml={class:"text-xs sm:text-sm text-gray-900 mt-1"},Ul={key:2},Tl={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Nl={key:0},Il={class:"text-xs sm:text-sm font-semibold text-gray-900"},Ol={key:1},El={class:"text-xs sm:text-sm font-semibold text-gray-900"},Rl={key:2},jl={class:"text-xs sm:text-sm font-semibold text-gray-900"},Hl={key:3},Pl={class:"text-xs sm:text-sm font-semibold text-gray-900"},Gl={key:4,class:"md:col-span-2"},Zl={class:"text-xs sm:text-sm font-semibold text-gray-900"},Kl={key:1,class:"bg-gray-50 rounded-lg p-8 sm:p-12 text-center"},Wl=Ee({__name:"DetailsModal",props:{modelValue:{type:Boolean},specimen:{}},emits:["update:modelValue","edit"],setup(Y,{emit:F}){const b=Y,re=F,$=C("clinical"),Z=O(()=>{var n;return(n=b.specimen)!=null&&n.free_fields?!!(b.specimen.free_fields.history||b.specimen.free_fields.riskFactors||p.value):!1}),p=O(()=>{var a,U;if(!((U=(a=b.specimen)==null?void 0:a.free_fields)!=null&&U.geolocation))return!1;const n=b.specimen.free_fields.geolocation;return!!(n.country||n.state||n.lga||n.city||n.address)}),k=n=>{if(!n)return"N/A";const a=[];if(n.freezer&&a.push(`Freezer: ${n.freezer}`),n.rack&&a.push(`Rack: ${n.rack}`),n.box&&a.push(`Box: ${n.box}`),n.position){const U=String.fromCharCode(65+Math.floor((n.position-1)/10)),T=(n.position-1)%10+1;a.push(`Position: ${U}${T}`)}return a.length>0?a.join(", "):"N/A"},P=n=>{if(!n)return"N/A";try{return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return n}},S=()=>{var se,ae,W,oe,E,N,G,ie,le,R,y;if(!b.specimen)return;const n={basic_information:{sample_serial_no:b.specimen.sample_serial_no,sample_label:b.specimen.sample_label,sample_type:b.specimen.sample_category_id,site:b.specimen.site_id,collection_date:b.specimen.collection_date,collection_time:b.specimen.collection_time,researcher:b.specimen.researcher_info,field_collector:b.specimen.field_collector_info,status:b.specimen.status},storage_location:b.specimen.storage_location,clinical_data:{diagnosis:(se=b.specimen.free_fields)==null?void 0:se.diagnosis,treatment_status:(ae=b.specimen.free_fields)==null?void 0:ae.treatmentStatus,outcomes:(W=b.specimen.free_fields)==null?void 0:W.outcomes},demographic_data:{date_of_birth:(oe=b.specimen.free_fields)==null?void 0:oe.dateOfBirth,age:(E=b.specimen.free_fields)==null?void 0:E.age,sex:(N=b.specimen.free_fields)==null?void 0:N.sex,ethnicity:(G=b.specimen.free_fields)==null?void 0:G.ethnicity,nationality:(ie=b.specimen.free_fields)==null?void 0:ie.nationality},epidemiological_data:{history:(le=b.specimen.free_fields)==null?void 0:le.history,risk_factors:(R=b.specimen.free_fields)==null?void 0:R.riskFactors,geolocation:(y=b.specimen.free_fields)==null?void 0:y.geolocation}},a=JSON.stringify(n,null,2),U=new Blob([a],{type:"application/json"}),T=document.createElement("a");T.href=URL.createObjectURL(U),T.download=`biospecimen_${b.specimen.sample_serial_no}_${new Date().toISOString().split("T")[0]}.json`,T.click()},B=()=>{b.specimen&&(re("edit",b.specimen),ee())},ee=()=>{$.value="clinical",re("update:modelValue",!1)};return(n,a)=>{const U=wt("Icon");return u(),ge(ht,{to:"body"},[g(me,{name:"modal"},{default:ue(()=>[n.modelValue&&n.specimen?(u(),f("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] bg-black/50 backdrop-blur-lg p-2 sm:p-4",onClick:_e(ee,["self"])},[e("div",Oo,[e("div",Eo,[e("div",Ro,[e("div",jo,[e("button",{onClick:ee,class:"p-2 hover:bg-gray-100 rounded-lg transition flex-shrink-0"},[g(U,{name:"heroicons:arrow-left",class:"w-5 h-5 sm:w-6 sm:h-6 text-gray-600"})]),a[3]||(a[3]=e("h2",{class:"text-lg sm:text-2xl font-bold text-gray-900"},"Biospecimen Details",-1))]),e("button",{onClick:S,class:"px-3 py-2 sm:px-4 sm:py-2.5 bg-[#005B8F] text-white rounded-lg transition flex items-center gap-2 shadow-md hover:bg-[#004a73] flex-shrink-0"},a[4]||(a[4]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 sm:w-5 sm:h-5"},[e("path",{d:"M12 16L7 11L8.4 9.55L11 12.15V4H13V12.15L15.6 9.55L17 11L12 16ZM6 20C5.45 20 4.97933 19.8043 4.588 19.413C4.19667 19.0217 4.00067 18.5507 4 18V15H6V18H18V15H20V18C20 18.55 19.8043 19.021 19.413 19.413C19.0217 19.805 18.5507 20.0007 18 20H6Z",fill:"white"})],-1),e("span",{class:"hidden sm:inline text-sm font-medium"},"Download",-1)]))]),e("div",Ho,[e("div",Po,[a[5]||(a[5]=e("div",{class:"rounded-full flex items-center justify-center mb-3"},[e("svg",{width:"48",height:"48",viewBox:"0 0 66 66",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"w-12 h-12 sm:w-16 sm:h-16"},[e("g",{"clip-path":"url(#clip0_2030_1458)"},[e("path",{d:"M32.998 65.9946C51.2237 65.9946 65.998 51.2203 65.998 32.9946C65.998 14.769 51.2237 -0.00537109 32.998 -0.00537109C14.7724 -0.00537109 -0.00195312 14.769 -0.00195312 32.9946C-0.00195312 51.2203 14.7724 65.9946 32.998 65.9946Z",fill:"#DEEEFF"}),e("path",{d:"M49.2949 47.5312L36.0509 27.9595L39.5984 20.9951H26.3984L29.9459 27.9595L16.7019 47.5312C16.4012 47.983 16.2287 48.5079 16.2027 49.0499C16.1767 49.592 16.2982 50.131 16.5543 50.6094C16.8104 51.0879 17.1915 51.4879 17.6569 51.7669C18.1224 52.046 18.6548 52.1935 19.1975 52.1939H46.7979C47.3408 52.1937 47.8735 52.0462 48.3391 51.7671C48.8048 51.488 49.186 51.0878 49.4422 50.6091C49.6983 50.1304 49.8198 49.5912 49.7936 49.0489C49.7674 48.5067 49.5946 47.9816 49.2935 47.5299",fill:"#2E3ECD"}),e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M43.0593 42.7422L45.6085 46.5647C45.8421 46.9148 45.9762 47.3217 45.9966 47.742C46.0169 48.1623 45.9228 48.5803 45.7242 48.9513C45.5255 49.3223 45.2299 49.6324 44.8688 49.8485C44.5077 50.0645 44.0947 50.1785 43.6739 50.1782H22.3009C21.8802 50.1786 21.4673 50.0647 21.1064 49.8486C20.7454 49.6326 20.4499 49.3226 20.2514 48.9517C20.0529 48.5808 19.9588 48.163 19.9793 47.7428C19.9998 47.3226 20.134 46.9159 20.3676 46.5661L22.9169 42.7436H26.0381C26.0774 42.5445 26.1684 42.3593 26.302 42.2066C26.4356 42.0539 26.6071 41.939 26.7992 41.8737C26.9912 41.8083 27.1972 41.7947 27.3962 41.8342C27.5952 41.8737 27.7803 41.9649 27.9329 42.0987C28.0229 41.7513 28.2256 41.4435 28.5092 41.2235C28.7929 41.0036 29.1415 40.8839 29.5004 40.8832C30.4491 40.8832 31.2508 41.7082 31.1036 42.7422H34.4022C34.3672 42.4501 34.3946 42.1539 34.4827 41.8731C34.5707 41.5924 34.7175 41.3336 34.9132 41.1139C35.1088 40.8942 35.349 40.7185 35.6176 40.5987C35.8863 40.4788 36.1774 40.4173 36.4716 40.4185C37.2774 40.4185 37.969 40.8805 38.3183 41.5487C38.5292 41.422 38.77 41.3537 39.016 41.3506C39.2621 41.3476 39.5045 41.4099 39.7185 41.5314C39.9325 41.6528 40.1105 41.8289 40.2341 42.0416C40.3577 42.2544 40.4225 42.4962 40.422 42.7422H43.0593Z",fill:"#6BAFFF"})]),e("defs",null,[e("clipPath",{id:"clip0_2030_1458"},[e("rect",{width:"66",height:"66",fill:"white"})])])])],-1)),e("h3",Go,v(n.specimen.sample_serial_no),1),e("span",Zo,v(n.specimen.sample_category_id),1)])])]),e("div",Ko,[e("div",Wo,[e("div",Jo,[e("div",Yo,[a[6]||(a[6]=e("span",{class:"text-xs sm:text-sm font-medium text-gray-600"},"Sample Label",-1)),e("span",qo,v(n.specimen.sample_label||"N/A"),1)]),e("div",Qo,[a[7]||(a[7]=e("span",{class:"text-xs sm:text-sm font-medium text-gray-600"},"Collection Date",-1)),e("span",Xo,v(P(n.specimen.collection_date)),1)]),e("div",el,[a[8]||(a[8]=e("span",{class:"text-xs sm:text-sm font-medium text-gray-600"},"Collection Time",-1)),e("span",tl,v(n.specimen.collection_time||"N/A"),1)]),e("div",sl,[a[9]||(a[9]=e("span",{class:"text-xs sm:text-sm font-medium text-gray-600"},"Field Collector",-1)),e("span",ol,v(n.specimen.field_collector_info||"N/A"),1)]),e("div",ll,[a[10]||(a[10]=e("span",{class:"text-xs sm:text-sm font-medium text-gray-600"},"Researcher",-1)),e("span",al,v(n.specimen.researcher_info||"N/A"),1)]),e("div",il,[a[11]||(a[11]=e("span",{class:"text-xs sm:text-sm font-medium text-gray-600"},"Site",-1)),e("span",nl,v(n.specimen.site_id||"N/A"),1)]),e("div",rl,[a[12]||(a[12]=e("span",{class:"text-xs sm:text-sm font-medium text-gray-600"},"Storage Location",-1)),e("span",dl,v(k(n.specimen.storage_location)),1)])])]),e("div",cl,[e("div",ul,[e("button",{onClick:a[0]||(a[0]=T=>$.value="clinical"),class:H(["pb-3 sm:pb-4 text-xs sm:text-sm font-semibold transition-all border-b-2 whitespace-nowrap",c($)==="clinical"?"text-blue-600 border-blue-600":"text-gray-500 border-transparent hover:text-gray-700"])}," Clinical ",2),e("button",{onClick:a[1]||(a[1]=T=>$.value="demographic"),class:H(["pb-3 sm:pb-4 text-xs sm:text-sm font-semibold transition-all border-b-2 whitespace-nowrap",c($)==="demographic"?"text-blue-600 border-blue-600":"text-gray-500 border-transparent hover:text-gray-700"])}," Demographic ",2),e("button",{onClick:a[2]||(a[2]=T=>$.value="epi"),class:H(["pb-3 sm:pb-4 text-xs sm:text-sm font-semibold transition-all border-b-2 whitespace-nowrap",c($)==="epi"?"text-blue-600 border-blue-600":"text-gray-500 border-transparent hover:text-gray-700"])}," Epidemiological ",2)])]),g(me,{name:"fade",mode:"out-in"},{default:ue(()=>{var T,se,ae,W,oe,E,N,G,ie,le,R,y,ne,de,q,K,J,z,Q,I;return[c($)==="clinical"?(u(),f("div",ml,[a[16]||(a[16]=e("h3",{class:"text-base font-bold text-gray-900 mb-3 sm:mb-4"},"Patient Clinical Data",-1)),e("div",pl,[e("div",gl,[a[13]||(a[13]=e("span",{class:"text-xs sm:text-sm font-medium text-gray-600 w-1/3"},"Diagnosis",-1)),e("span",fl,v(((T=n.specimen.free_fields)==null?void 0:T.diagnosis)||"N/A"),1)]),e("div",xl,[a[14]||(a[14]=e("span",{class:"text-xs sm:text-sm font-medium text-gray-600 w-1/3"},"Treatment Status",-1)),e("span",vl,v(((se=n.specimen.free_fields)==null?void 0:se.treatmentStatus)||"N/A"),1)]),e("div",_l,[a[15]||(a[15]=e("span",{class:"text-xs sm:text-sm font-medium text-gray-600 w-1/3"},"Outcomes",-1)),e("span",bl,v(((ae=n.specimen.free_fields)==null?void 0:ae.outcomes)||"N/A"),1)])])])):c($)==="demographic"?(u(),f("div",yl,[a[22]||(a[22]=e("h3",{class:"text-base font-bold text-gray-900 mb-3 sm:mb-4"},"Patient Demographic Data",-1)),e("div",hl,[e("div",wl,[e("div",null,[a[17]||(a[17]=e("label",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date of Birth",-1)),e("p",kl,v(P((W=n.specimen.free_fields)==null?void 0:W.dateOfBirth)||"N/A"),1)]),e("div",null,[a[18]||(a[18]=e("label",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Age",-1)),e("p",Cl,v((oe=n.specimen.free_fields)!=null&&oe.age?`${n.specimen.free_fields.age} years`:"N/A"),1)]),e("div",null,[a[19]||(a[19]=e("label",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sex",-1)),e("p",Sl,v(((E=n.specimen.free_fields)==null?void 0:E.sex)||"N/A"),1)])]),e("div",$l,[e("div",null,[a[20]||(a[20]=e("label",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ethnicity",-1)),e("p",Vl,v(((N=n.specimen.free_fields)==null?void 0:N.ethnicity)||"N/A"),1)]),e("div",null,[a[21]||(a[21]=e("label",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nationality",-1)),e("p",Bl,v(((G=n.specimen.free_fields)==null?void 0:G.nationality)||"N/A"),1)])])])])):c($)==="epi"?(u(),f("div",Fl,[a[32]||(a[32]=e("h3",{class:"text-base font-bold text-gray-900 mb-3 sm:mb-4"},"Epidemiological Information",-1)),c(Z)?(u(),f("div",Dl,[(ie=n.specimen.free_fields)!=null&&ie.history?(u(),f("div",Ll,[a[23]||(a[23]=e("label",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"History",-1)),e("p",zl,v(n.specimen.free_fields.history),1)])):D("",!0),(le=n.specimen.free_fields)!=null&&le.riskFactors?(u(),f("div",Al,[a[24]||(a[24]=e("label",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider"},"Risk Factors",-1)),e("p",Ml,v(n.specimen.free_fields.riskFactors),1)])):D("",!0),c(p)?(u(),f("div",Ul,[a[30]||(a[30]=e("label",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-2 block"},"Geolocation",-1)),e("div",Tl,[(y=(R=n.specimen.free_fields)==null?void 0:R.geolocation)!=null&&y.country?(u(),f("div",Nl,[a[25]||(a[25]=e("span",{class:"text-xs text-gray-500"},"Country:",-1)),e("p",Il,v(n.specimen.free_fields.geolocation.country),1)])):D("",!0),(de=(ne=n.specimen.free_fields)==null?void 0:ne.geolocation)!=null&&de.state?(u(),f("div",Ol,[a[26]||(a[26]=e("span",{class:"text-xs text-gray-500"},"State:",-1)),e("p",El,v(n.specimen.free_fields.geolocation.state),1)])):D("",!0),(K=(q=n.specimen.free_fields)==null?void 0:q.geolocation)!=null&&K.lga?(u(),f("div",Rl,[a[27]||(a[27]=e("span",{class:"text-xs text-gray-500"},"LGA:",-1)),e("p",jl,v(n.specimen.free_fields.geolocation.lga),1)])):D("",!0),(z=(J=n.specimen.free_fields)==null?void 0:J.geolocation)!=null&&z.city?(u(),f("div",Hl,[a[28]||(a[28]=e("span",{class:"text-xs text-gray-500"},"City:",-1)),e("p",Pl,v(n.specimen.free_fields.geolocation.city),1)])):D("",!0),(I=(Q=n.specimen.free_fields)==null?void 0:Q.geolocation)!=null&&I.address?(u(),f("div",Gl,[a[29]||(a[29]=e("span",{class:"text-xs text-gray-500"},"Address:",-1)),e("p",Zl,v(n.specimen.free_fields.geolocation.address),1)])):D("",!0)])])):D("",!0)])):(u(),f("div",Kl,[g(U,{name:"heroicons:document-text",class:"w-12 h-12 sm:w-16 sm:h-16 text-gray-300 mx-auto mb-3"}),a[31]||(a[31]=e("p",{class:"text-sm sm:text-base text-gray-500"},"No epidemiological data available",-1))]))])):D("",!0)]}),_:1})]),e("div",{class:"flex-shrink-0 p-4 sm:p-6 md:p-8 border-t border-gray-100"},[e("div",{class:"flex justify-end gap-2 sm:gap-3"},[e("button",{onClick:ee,class:"px-4 py-2 sm:px-6 sm:py-3 border border-gray-300 text-gray-700 rounded-lg transition hover:bg-gray-50 text-xs sm:text-sm font-medium"}," Close "),e("button",{onClick:B,class:"px-4 py-2 sm:px-6 sm:py-3 bg-[#005B8F] text-white rounded-lg transition flex items-center gap-2 shadow-md hover:bg-[#004a73] text-xs sm:text-sm"},a[33]||(a[33]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 sm:w-5 sm:h-5"},[e("path",{d:"M18.988 2.01221L21.988 5.01221L19.701 7.30021L16.701 4.30021L18.988 2.01221ZM8 16.0002H11L18.287 8.71321L15.287 5.71321L8 13.0002V16.0002Z",fill:"white"}),e("path",{d:"M19 19H8.158C8.132 19 8.105 19.01 8.079 19.01C8.046 19.01 8.013 19.001 7.979 19H5V5H11.847L13.847 3H5C3.897 3 3 3.896 3 5V19C3 20.104 3.897 21 5 21H19C19.5304 21 20.0391 20.7893 20.4142 20.4142C20.7893 20.0391 21 19.5304 21 19V10.332L19 12.332V19Z",fill:"white"})],-1),e("span",{class:"font-medium"},"Edit",-1)]))])])])])):D("",!0)]),_:1})])}}}),Jl=Re(Wl,[["__scopeId","data-v-fa314091"]]),Yl={class:"min-h-screen"},ql={class:""},Ql={class:"flex flex-col px-6 md:flex-row md:items-center py-6 rounded-xl bg-[#DCF1FF] text-[#005B8F] justify-between gap-4 mb-6"},Xl={class:"flex gap-2"},ea=["disabled"],ta={key:0,class:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50"},sa={key:0,class:"flex justify-center items-center py-12"},oa={class:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end mb-6"},la={class:"md:col-span-2"},aa={class:"md:col-span-2"},ia={class:"md:col-span-2"},na={class:"md:col-span-3"},ra={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200 p-12"},da={key:1,class:"bg-white rounded-lg shadow-sm border-[0.5px] border-gray-100 overflow-hidden"},ca={class:"overflow-x-auto"},ua={class:"min-w-full divide-y-[0.5px] divide-gray-100"},ma={class:"bg-white divide-y-[0.5px] divide-gray-100"},pa={class:"px-6 py-6 whitespace-nowrap text-sm text-gray-900"},ga={class:"px-6 py-6 whitespace-nowrap text-sm text-gray-900"},fa={class:"flex items-center gap-2"},xa=["title"],va=["onClick"],_a={class:"px-6 py-6 whitespace-nowrap text-sm text-gray-900"},ba=["title"],ya={class:"px-6 py-6 text-sm text-gray-600"},ha={class:"flex items-center gap-2 max-w-[250px]"},wa=["title"],ka={class:"px-6 py-6 whitespace-nowrap text-sm"},Ca={class:"px-6 py-6 whitespace-nowrap text-sm text-gray-700"},Sa={class:"flex flex-col"},$a={class:"font-medium"},Va={key:0,class:"text-xs text-gray-500"},Ba={class:"px-6 py-6 whitespace-nowrap text-sm text-gray-700"},Fa=["title"],Da={class:"px-6 py-6 whitespace-nowrap text-sm text-gray-700"},La=["title"],za={class:"px-6 py-6 whitespace-nowrap text-sm"},Aa={class:"px-6 py-6 whitespace-nowrap text-sm sticky right-0 bg-white"},Ma={class:"flex items-center gap-2"},Ua=["onClick"],Ta=["onClick"],Na={key:0},Ia=Ee({__name:"registration",setup(Y){const{samples:F,loading:b}=Xt(),{getSites:re}=Ct(),{getCategories:$}=St(),Z=C(null),p=C(""),k=C({type:"All Types",site:"All Sites",status:"All Status"}),P=C(!1),S=C(!1),B=C(!1),ee=C(null),n=C(null),a=C(!1),U=C("");qt(async()=>{await re(),await $()});const T={mounted(r,l){r.clickOutsideEvent=h=>{r===h.target||r.contains(h.target)||l.value(h)},setTimeout(()=>{document.addEventListener("click",r.clickOutsideEvent)},0)},unmounted(r){document.removeEventListener("click",r.clickOutsideEvent)}},se=()=>{B.value=!1},ae=O(()=>{const r=new Set(["All Types"]);return F.value&&F.value.length>0&&F.value.forEach(l=>{l.sample_category_id&&r.add(l.sample_category_id)}),Array.from(r).sort()}),W=O(()=>{const r=new Set(["All Sites"]);return F.value&&F.value.length>0&&F.value.forEach(l=>{l.site_id&&r.add(l.site_id)}),Array.from(r).sort()});xe(p,()=>{y()}),xe(()=>k.value.type,()=>{y()}),xe(()=>k.value.site,()=>{y()}),xe(()=>k.value.status,()=>{y()});const oe=O(()=>{const r=new Set(["All Status"]);return F.value&&F.value.forEach(l=>{l.status&&r.add(l.status)}),Array.from(r)}),E=O(()=>{if(!F.value)return[];let r=[...F.value];if(p.value&&p.value.trim()!==""){const l=p.value.toLowerCase().trim();r=r.filter(h=>{var pe,ke,Ce,Se,$e,ye,fe;const A=(pe=h.sample_serial_no)==null?void 0:pe.toLowerCase().includes(l),w=(ke=h.sample_label)==null?void 0:ke.toLowerCase().includes(l),V=(Ce=h.field_collector_info)==null?void 0:Ce.toLowerCase().includes(l),j=(Se=h.researcher_info)==null?void 0:Se.toLowerCase().includes(l),x=($e=h.sample_category_id)==null?void 0:$e.toLowerCase().includes(l),te=(ye=h.site_id)==null?void 0:ye.toLowerCase().includes(l),X=(fe=h.status)==null?void 0:fe.toLowerCase().includes(l);return A||w||V||j||x||te||X})}return k.value.type&&k.value.type!=="All Types"&&(r=r.filter(l=>l.sample_category_id===k.value.type)),k.value.site&&k.value.site!=="All Sites"&&(r=r.filter(l=>l.site_id===k.value.site)),k.value.status&&k.value.status!=="All Status"&&(r=r.filter(l=>l.status===k.value.status)),r}),{currentPage:N,pageSize:G,totalItems:ie,totalPages:le,paginatedItems:R,resetPagination:y}=ls(E,{initialPage:1,initialPageSize:10,pageSizeOptions:[10,25,50,100]}),ne=O(()=>(N.value-1)*G.value);O(()=>ne.value+G.value),O(()=>E.value),O(()=>{const r=[];let h=Math.max(1,N.value-Math.floor(2.5)),A=Math.min(le.value,h+5-1);A-h<4&&(h=Math.max(1,A-5+1));for(let w=h;w<=A;w++)r.push(w);return r});const de=r=>{if(!r)return"N/A";const l=[];return r.site&&l.push(`Site: ${r.site}`),r.freezer&&l.push(`Freezer: ${r.freezer}`),r.rack&&l.push(`Rack: ${r.rack}`),r.box&&l.push(`Box: ${r.box}`),r.position&&l.push(`Pos: ${r.position}`),l.length>0?l.join(" | "):"N/A"},q=r=>{if(!r)return"N/A";try{return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return r}},K=r=>({BLOOD:"bg-red-100 text-red-700",SERUM:"bg-green-100 text-green-700",PLASMA:"bg-blue-100 text-blue-700",TISSUE:"bg-orange-100 text-orange-700",DNA:"bg-pink-100 text-pink-700",RNA:"bg-purple-100 text-purple-700",URINE:"bg-yellow-100 text-yellow-700",SALIVA:"bg-cyan-100 text-cyan-700"})[r==null?void 0:r.toUpperCase()]||"bg-gray-100 text-gray-700",J=r=>({Active:"bg-green-100 text-green-700",Stored:"bg-blue-100 text-blue-700","In Transit":"bg-yellow-100 text-yellow-700",Disposed:"bg-red-100 text-red-700",Reserved:"bg-purple-100 text-purple-700",Quarantine:"bg-orange-100 text-orange-700"})[r]||"bg-gray-100 text-gray-700",z=async r=>{try{await navigator.clipboard.writeText(r),U.value="Copied to clipboard!",a.value=!0,setTimeout(()=>{a.value=!1},3e3)}catch(l){console.error("Failed to copy:",l),U.value="Failed to copy",a.value=!0,setTimeout(()=>{a.value=!1},3e3)}},Q=()=>{console.log("Applying filters:",k.value),y()},I=()=>{p.value="",k.value={type:"All Types",site:"All Sites",status:"All Status"},y()},s=()=>{n.value=null,P.value=!0},Fe=r=>{n.value=r,P.value=!0},De=r=>{ee.value=r,S.value=!0},Le=async r=>{console.log("Specimen saved:",r),U.value=n.value?"Specimen updated successfully!":"Specimen saved successfully!",a.value=!0,setTimeout(()=>{a.value=!1},3e3),n.value=null},be=r=>{if(B.value=!1,!E.value||E.value.length===0){U.value="No data to download",a.value=!0,setTimeout(()=>{a.value=!1},3e3);return}r==="csv"?ze():r==="excel"?Ae():r==="json"&&Me()},ze=()=>{const r=["Sample Serial No","Sample Label","Site","Type","Collection Date","Collection Time","Field Collector","Researcher","Status","Storage Site","Freezer","Rack","Box","Position"],l=E.value.map(V=>{var j,x,te,X,pe;return[V.sample_serial_no||"",V.sample_label||"",V.site_id||"",V.sample_category_id||"",V.collection_date||"",V.collection_time||"",V.field_collector_info||"",V.researcher_info||"",V.status||"",((j=V.storage_location)==null?void 0:j.site)||"",((x=V.storage_location)==null?void 0:x.freezer)||"",((te=V.storage_location)==null?void 0:te.rack)||"",((X=V.storage_location)==null?void 0:X.box)||"",((pe=V.storage_location)==null?void 0:pe.position)||""]}),h=[r.join(","),...l.map(V=>V.map(j=>`"${j}"`).join(","))].join(`
`),A=new Blob([h],{type:"text/csv;charset=utf-8;"}),w=document.createElement("a");w.href=URL.createObjectURL(A),w.download=`biospecimens_${new Date().toISOString().split("T")[0]}.csv`,w.click(),U.value="Downloaded as CSV",a.value=!0,setTimeout(()=>{a.value=!1},3e3)},Ae=()=>{const r=["Sample Serial No","Sample Label","Site","Type","Collection Date","Collection Time","Field Collector","Researcher","Status","Storage Site","Freezer","Rack","Box","Position"];let l="<table><thead><tr>";r.forEach(w=>{l+=`<th>${w}</th>`}),l+="</tr></thead><tbody>",E.value.forEach(w=>{var V,j,x,te,X;l+="<tr>",l+=`<td>${w.sample_serial_no||""}</td>`,l+=`<td>${w.sample_label||""}</td>`,l+=`<td>${w.site_id||""}</td>`,l+=`<td>${w.sample_category_id||""}</td>`,l+=`<td>${w.collection_date||""}</td>`,l+=`<td>${w.collection_time||""}</td>`,l+=`<td>${w.field_collector_info||""}</td>`,l+=`<td>${w.researcher_info||""}</td>`,l+=`<td>${w.status||""}</td>`,l+=`<td>${((V=w.storage_location)==null?void 0:V.site)||""}</td>`,l+=`<td>${((j=w.storage_location)==null?void 0:j.freezer)||""}</td>`,l+=`<td>${((x=w.storage_location)==null?void 0:x.rack)||""}</td>`,l+=`<td>${((te=w.storage_location)==null?void 0:te.box)||""}</td>`,l+=`<td>${((X=w.storage_location)==null?void 0:X.position)||""}</td>`,l+="</tr>"}),l+="</tbody></table>";const h=new Blob([l],{type:"application/vnd.ms-excel"}),A=document.createElement("a");A.href=URL.createObjectURL(h),A.download=`biospecimens_${new Date().toISOString().split("T")[0]}.xls`,A.click(),U.value="Downloaded as Excel",a.value=!0,setTimeout(()=>{a.value=!1},3e3)},Me=()=>{const r=JSON.stringify(E.value,null,2),l=new Blob([r],{type:"application/json"}),h=document.createElement("a");h.href=URL.createObjectURL(l),h.download=`biospecimens_${new Date().toISOString().split("T")[0]}.json`,h.click(),U.value="Downloaded as JSON",a.value=!0,setTimeout(()=>{a.value=!1},3e3)};return(r,l)=>{const h=bt,A=yt,w=Wt,V=Io,j=Jl;return u(),f("div",Yl,[e("div",ql,[e("div",Ql,[l[17]||(l[17]=e("div",null,[e("h1",{class:"text-xl font-semibold bg-[#DCF1FF] text-[#005B8F]"},"BioSpecimen Registration"),e("p",{class:"text-base bg-[#DCF1FF] text-[#005B8F] mt-1"},"Register, manage, and track all biospecimen records")],-1)),e("div",Xl,[e("div",{class:"relative",ref_key:"downloadDropdownRef",ref:Z},[e("button",{onClick:l[0]||(l[0]=_e(x=>B.value=!B.value,["stop"])),disabled:!c(F)||c(F).length===0,class:"bg-white border border-gray-200 text-gray-700 px-4 py-2.5 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"},l[12]||(l[12]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 256 256"},[e("path",{d:"M248,128a87.34,87.34,0,0,1-17.6,52.81,8,8,0,1,1-12.8-9.62A71.34,71.34,0,0,0,232,128a72,72,0,0,0-144,0,8,8,0,0,1-16,0,88,88,0,0,1,3.29-23.88C74.2,104,73.1,104,72,104a48,48,0,0,0,0,96H96a8,8,0,0,1,0,16H72A64,64,0,1,1,81.29,88.68,88,88,0,0,1,248,128Zm-69.66,42.34L160,188.69V128a8,8,0,0,0-16,0v60.69l-18.34-18.35a8,8,0,0,0-11.32,11.32l32,32a8,8,0,0,0,11.32,0l32-32a8,8,0,0,0-11.32-11.32Z"})],-1),e("span",{class:"font-medium"},"Download",-1)]),8,ea),g(me,{name:"fade"},{default:ue(()=>[B.value?Oe((u(),f("div",ta,[e("button",{onClick:l[1]||(l[1]=x=>be("csv")),class:"w-full text-left px-4 py-2.5 hover:bg-gray-50 flex items-center gap-3 text-sm transition-colors"},l[13]||(l[13]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 256 256"},[e("path",{d:"M48,180c0,11,7.18,20,16,20a14.24,14.24,0,0,0,10.22-4.66A8,8,0,0,1,85.78,206.4,30.06,30.06,0,0,1,64,216c-17.65,0-32-16.15-32-36s14.35-36,32-36a30.06,30.06,0,0,1,21.78,9.6,8,8,0,0,1-11.56,11.06A14.24,14.24,0,0,0,64,160C55.18,160,48,169,48,180Z"})],-1),e("span",null,"Download as CSV",-1)])),e("button",{onClick:l[2]||(l[2]=x=>be("excel")),class:"w-full text-left px-4 py-2.5 hover:bg-gray-50 flex items-center gap-3 text-sm transition-colors"},l[14]||(l[14]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 256 256"},[e("path",{d:"M156,208a8,8,0,0,1-8,8H120a8,8,0,0,1-8-8V152a8,8,0,0,1,16,0v48h20A8,8,0,0,1,156,208Z"})],-1),e("span",null,"Download as Excel",-1)])),e("button",{onClick:l[3]||(l[3]=x=>be("json")),class:"w-full text-left px-4 py-2.5 hover:bg-gray-50 flex items-center gap-3 text-sm transition-colors"},l[15]||(l[15]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 256 256"},[e("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40v72a8,8,0,0,0,16,0V40h88V88a8,8,0,0,0,8,8h48V216H176a8,8,0,0,0,0,16h24a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34Z"})],-1),e("span",null,"Download as JSON",-1)]))])),[[T,se]]):D("",!0)]),_:1})],512),e("button",{onClick:s,class:"px-4 py-2.5 rounded-lg text-[#DCF1FF] bg-[#005B8F] transition-colors flex items-center gap-2 shadow-sm"},l[16]||(l[16]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 18 16"},[e("path",{d:"M3.01562 0C1.9125 0 1.01562 0.896875 1.01562 2V14C1.01562 15.1031 1.9125 16 3.01562 16H11.0156C12.1187 16 13.0156 15.1031 13.0156 14V11H15.4563L14.4875 11.9688C14.1938 12.2625 14.1938 12.7375 14.4875 13.0281C14.7812 13.3187 15.2563 13.3219 15.5469 13.0281L17.7969 10.7781C18.0906 10.4844 18.0906 10.0094 17.7969 9.71875L15.5469 7.46875C15.2531 7.175 14.7781 7.175 14.4875 7.46875C14.1969 7.7625 14.1938 8.2375 14.4875 8.52812L15.4563 9.49687H13.0156V5.325C13.0156 4.79375 12.8062 4.28438 12.4312 3.90937L9.1 0.584375C8.725 0.209375 8.21875 0 7.6875 0H3.01562Z"})],-1),e("span",{class:"font-medium"},"Register Biospecimen",-1)]))])]),c(b)?(u(),f("div",sa,l[18]||(l[18]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#005B8F]"},null,-1)]))):(u(),f(ve,{key:1},[e("section",oa,[e("div",la,[g(h,{label:"All Types",options:ae.value,position:"standalone",modelValue:k.value.type,"onUpdate:modelValue":l[4]||(l[4]=x=>k.value.type=x)},null,8,["options","modelValue"])]),e("div",aa,[g(h,{label:"All Sites",options:W.value,position:"standalone",modelValue:k.value.site,"onUpdate:modelValue":l[5]||(l[5]=x=>k.value.site=x)},null,8,["options","modelValue"])]),e("div",ia,[g(h,{label:"All Status",options:oe.value,position:"standalone",modelValue:k.value.status,"onUpdate:modelValue":l[6]||(l[6]=x=>k.value.status=x)},null,8,["options","modelValue"])]),e("div",na,[g(A,{modelValue:p.value,"onUpdate:modelValue":l[7]||(l[7]=x=>p.value=x),type:"text",label:"Filter Table"},null,8,["modelValue"])]),e("div",{class:"md:col-span-3 flex gap-2"},[e("button",{onClick:Q,class:"flex-1 bg-[#005B8F] text-white px-6 py-2.5 rounded-lg hover:bg-[#004a73] transition-colors text-sm font-medium"}," Search "),e("button",{onClick:I,class:"flex-1 border border-[#005B8F] text-[#005B8F] px-6 py-2.5 rounded-lg hover:bg-blue-50 transition-colors text-sm font-medium"}," Clear Filter ")])]),!c(F)||c(F).length===0?(u(),f("div",ra,[e("div",{class:"text-center"},[l[20]||(l[20]=e("svg",{class:"w-20 h-20 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),l[21]||(l[21]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"No BioSpecimens Available",-1)),l[22]||(l[22]=e("p",{class:"text-gray-500 mb-6"},"Get started by registering your first biospecimen",-1)),e("button",{onClick:s,class:"bg-[#005B8F] text-white px-6 py-3 rounded-lg hover:bg-[#004a73] transition-colors inline-flex items-center gap-2"},l[19]||(l[19]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"font-medium"},"Register First Biospecimen",-1)]))])])):(u(),f("div",da,[e("div",ca,[e("table",ua,[l[29]||(l[29]=e("thead",{class:"bg-gray-25"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"SN"),e("th",{scope:"col",class:"px-6 py-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Sample Serial No"),e("th",{scope:"col",class:"px-6 py-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Sample Label"),e("th",{scope:"col",class:"px-6 py-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Storage Location"),e("th",{scope:"col",class:"px-6 py-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Type"),e("th",{scope:"col",class:"px-6 py-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Collection Date"),e("th",{scope:"col",class:"px-6 py-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Field Collector"),e("th",{scope:"col",class:"px-6 py-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Researcher"),e("th",{scope:"col",class:"px-6 py-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},"Status"),e("th",{scope:"col",class:"px-6 py-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap sticky right-0 bg-gray-50"},"Actions")])],-1)),e("tbody",ma,[(u(!0),f(ve,null,Be(c(R),(x,te)=>(u(),f("tr",{key:x.uuid,class:"hover:bg-gray-50 transition-colors"},[e("td",pa,v((c(N)-1)*c(G)+te+1),1),e("td",ga,[e("div",fa,[e("span",{class:"font-medium max-w-[150px] truncate",title:x.sample_serial_no},v(x.sample_serial_no||"N/A"),9,xa),x.sample_serial_no?(u(),f("button",{key:0,onClick:X=>z(x.sample_serial_no),class:"text-gray-400 hover:text-gray-600 transition flex-shrink-0",title:"Copy"},l[23]||(l[23]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,va)):D("",!0)])]),e("td",_a,[e("span",{class:"font-medium max-w-[150px] truncate inline-block",title:x.sample_label},v(x.sample_label||"N/A"),9,ba)]),e("td",ya,[e("div",ha,[l[24]||(l[24]=e("svg",{class:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),e("span",{class:"text-xs truncate",title:de(x.storage_location)},v(de(x.storage_location)),9,wa)])]),e("td",ka,[e("span",{class:H([K(x.sample_category_id),"inline-flex px-2.5 py-1 rounded-full text-xs font-medium"])},v(x.sample_category_id||"N/A"),3)]),e("td",Ca,[e("div",Sa,[e("span",$a,v(q(x.collection_date)),1),x.collection_time?(u(),f("span",Va,v(x.collection_time),1)):D("",!0)])]),e("td",Ba,[e("span",{class:"max-w-[120px] truncate inline-block",title:x.field_collector_info},v(x.field_collector_info||"N/A"),9,Fa)]),e("td",Da,[e("span",{class:"max-w-[120px] truncate inline-block",title:x.researcher_info},v(x.researcher_info||"N/A"),9,La)]),e("td",za,[e("span",{class:H([J(x.status),"inline-flex px-2.5 py-1 rounded-full text-xs font-medium"])},v(x.status||"N/A"),3)]),e("td",Aa,[e("div",Ma,[e("button",{onClick:X=>De(x),class:"p-2 hover:bg-gray-100 rounded-lg transition",title:"View details"},l[25]||(l[25]=[e("svg",{class:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e("path",{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1)]),8,Ua),e("button",{onClick:X=>Fe(x),class:"p-2 hover:bg-blue-50 rounded-lg transition",title:"Edit"},l[26]||(l[26]=[e("svg",{class:"w-5 h-5 text-[#005B8F]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Ta)])])]))),128)),c(R).length===0?(u(),f("tr",Na,[e("td",{colspan:"10",class:"px-6 py-12 text-center"},[l[27]||(l[27]=e("svg",{class:"w-12 h-12 text-gray-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),l[28]||(l[28]=e("p",{class:"text-gray-500 text-sm font-medium mb-2"},"No specimens match your filters",-1)),e("button",{onClick:I,class:"text-[#005B8F] hover:text-[#004a73] font-medium text-sm"}," Clear all filters ")])])):D("",!0)])])]),E.value.length>0?(u(),ge(w,{key:0,currentPage:c(N),"onUpdate:currentPage":l[8]||(l[8]=x=>_t(N)?N.value=x:null),pageSize:c(G),"onUpdate:pageSize":l[9]||(l[9]=x=>_t(G)?G.value=x:null),totalItems:c(ie),pageSizeOptions:[10,25,50,100]},null,8,["currentPage","pageSize","totalItems"])):D("",!0)]))],64))]),g(V,{modelValue:P.value,"onUpdate:modelValue":l[10]||(l[10]=x=>P.value=x),editData:n.value,onSaved:Le},null,8,["modelValue","editData"]),g(j,{modelValue:S.value,"onUpdate:modelValue":l[11]||(l[11]=x=>S.value=x),specimen:ee.value},null,8,["modelValue","specimen"])])}}}),Ya=Re(Ia,[["__scopeId","data-v-fa0cf7d3"]]);export{Ya as default};
