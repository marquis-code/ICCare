import{e as U,r as V,p as C,m as W,C as H,c as r,o as u,x as S,a as s,b as q,t as x,F as T,B as R,d as re,k as B,n as _,w as G,g as ue,v as ie,T as Q}from"./-CC84MIu.js";import{r as A}from"./DUQ91oIC.js";import{u as Y}from"./DY4jcAV6.js";const ce={key:0,class:"block text-sm font-medium text-gray-700 mb-2"},de={class:"flex flex-wrap gap-1 flex-1"},me={key:0,class:"text-gray-400"},ge=["onClick"],fe={key:0,class:"absolute z-50 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto"},pe={key:0,class:"p-2 border-b border-gray-200"},ve=["checked",".indeterminate"],he={key:2},ye=["onClick"],we=["checked"],be={class:"text-sm text-gray-700"},ke={key:3,class:"px-3 py-4 text-sm text-gray-500 text-center"},He=U({__name:"MultiSelect",props:{modelValue:{},options:{},label:{default:""},placeholder:{default:"Select items..."},searchable:{type:Boolean,default:!0},selectAll:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(p,{emit:v}){const n=p,w=v,h=V(null),l=V(!1),i=V(""),m=C(()=>n.options.filter(f=>n.modelValue.includes(f.value))),a=C(()=>{if(!i.value)return n.options;const f=i.value.toLowerCase();return n.options.filter(c=>c.label.toLowerCase().includes(f))}),d=C(()=>n.options.length>0&&n.modelValue.length===n.options.length),g=C(()=>n.modelValue.length>0&&n.modelValue.length<n.options.length),F=f=>n.modelValue.includes(f),j=()=>{l.value=!l.value,l.value||(i.value="")},O=f=>{const c=[...n.modelValue],y=c.indexOf(f.value);y>-1?c.splice(y,1):c.push(f.value),w("update:modelValue",c)},N=f=>{const c=n.modelValue.filter(y=>y!==f);w("update:modelValue",c)},E=()=>{d.value?w("update:modelValue",[]):w("update:modelValue",n.options.map(f=>f.value))},b=f=>{h.value&&!h.value.contains(f.target)&&(l.value=!1,i.value="")};return W(()=>{document.addEventListener("click",b)}),H(()=>{document.removeEventListener("click",b)}),(f,c)=>(u(),r("div",{class:"relative",ref_key:"multiselectRef",ref:h},[f.label?(u(),r("label",ce,x(f.label),1)):S("",!0),s("div",{onClick:j,class:_(["w-full px-3 py-3 border-[0.5px] border-gray-100 outline-none rounded-xl focus:outline-nonecursor-pointer bg-white min-h-[42px] flex items-center justify-between",{"ring-2 ring-blue-500":l.value}])},[s("div",de,[m.value.length===0?(u(),r("span",me,x(f.placeholder),1)):S("",!0),(u(!0),r(T,null,R(m.value,y=>(u(),r("span",{key:y.value,class:"inline-flex items-center gap-1 px-2 py-2 bg-blue-100 text-blue-800 rounded-full text-sm"},[re(x(y.label)+" ",1),s("button",{onClick:B(L=>N(y.value),["stop"]),class:"hover:text-blue-600 focus:outline-none"},c[4]||(c[4]=[s("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ge)]))),128))]),(u(),r("svg",{class:_(["w-5 h-5 text-gray-400 transition-transform",{"transform rotate-180":l.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c[5]||(c[5]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),q(Q,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:G(()=>[l.value?(u(),r("div",fe,[f.searchable?(u(),r("div",pe,[ue(s("input",{"onUpdate:modelValue":c[0]||(c[0]=y=>i.value=y),type:"text",placeholder:"Search...",class:"custom-input",onClick:c[1]||(c[1]=B(()=>{},["stop"]))},null,512),[[ie,i.value]])])):S("",!0),f.selectAll?(u(),r("div",{key:1,class:"px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-200 flex items-center gap-2",onClick:E},[s("input",{type:"checkbox",checked:d.value,".indeterminate":g.value,class:"custom-checkbox",onClick:c[2]||(c[2]=B(()=>{},["stop"]))},null,40,ve),c[6]||(c[6]=s("span",{class:"text-sm font-medium text-gray-700"},"Select All",-1))])):S("",!0),a.value.length>0?(u(),r("div",he,[(u(!0),r(T,null,R(a.value,y=>(u(),r("div",{key:y.value,class:"px-3 py-2 hover:bg-gray-50 cursor-pointer flex items-center gap-2",onClick:L=>O(y)},[s("input",{type:"checkbox",checked:F(y.value),class:"custom-checkbox",onClick:c[3]||(c[3]=B(()=>{},["stop"]))},null,8,we),s("span",be,x(y.label),1)],8,ye))),128))])):(u(),r("div",ke," No options found "))])):S("",!0)]),_:1})],512))}}),qe=()=>{const p=V(!1),v=V(null),{showToast:n}=Y();return{loading:p,utilizationData:v,getUtilizationLevel:async h=>{var l,i,m,a;p.value=!0;try{const d=await A.$_get_utilization_level(h);if(d.type!=="ERROR")return v.value=d.data,d.data;{const g=((m=(i=(l=d==null?void 0:d.data)==null?void 0:l.detail)==null?void 0:i[0])==null?void 0:m.msg)||((a=d==null?void 0:d.data)==null?void 0:a.error)||"Failed to fetch utilization data";return n({title:"Error",message:g,toastType:"error",duration:3e3}),null}}catch(d){return n({title:"Error",message:(d==null?void 0:d.message)||"Something went wrong",toastType:"error",duration:3e3}),null}finally{p.value=!1}}}},Ge=()=>{const p=V(!1),{showToast:v}=Y();return{loading:p,scheduleReport:async w=>{var h,l,i,m;p.value=!0;try{const a=await A.$_schedule_report(w);if(a.type!=="ERROR")return v({title:"Success",message:"Report scheduled successfully",toastType:"success",duration:3e3}),a.data;{const d=((i=(l=(h=a==null?void 0:a.data)==null?void 0:h.detail)==null?void 0:l[0])==null?void 0:i.msg)||((m=a==null?void 0:a.data)==null?void 0:m.error)||"Failed to schedule report";return v({title:"Error",message:d,toastType:"error",duration:3e3}),null}}catch(a){return v({title:"Error",message:(a==null?void 0:a.message)||"Something went wrong",toastType:"error",duration:3e3}),null}finally{p.value=!1}}}},Qe=()=>{const p=V(!1),{showToast:v}=Y();return{loading:p,exportData:async w=>{var h,l,i,m;p.value=!0;try{const a=await A.$_export_data(w);if(a.type!=="ERROR")return v({title:"Success",message:"Data exported successfully",toastType:"success",duration:3e3}),a.data;{const d=((i=(l=(h=a==null?void 0:a.data)==null?void 0:h.detail)==null?void 0:l[0])==null?void 0:i.msg)||((m=a==null?void 0:a.data)==null?void 0:m.error)||"Failed to export data";return v({title:"Error",message:d,toastType:"error",duration:3e3}),null}}catch(a){return v({title:"Error",message:(a==null?void 0:a.message)||"Something went wrong",toastType:"error",duration:3e3}),null}finally{p.value=!1}}}},Je=()=>{const p=V(!1),v=V(null),{showToast:n}=Y();return{loading:p,alertResponse:v,checkAndNotifyAlerts:async h=>{var l,i,m,a,d;p.value=!0,v.value=null;try{const g=await A.$_check_and_notify_alerts(h);if(g.type!=="ERROR")return v.value=g.data,(l=g.data)!=null&&l.alert_triggered?n({title:"Alert Triggered",message:g.data.message||"Alert has been triggered and notifications sent",toastType:"warning",duration:5e3}):n({title:"All Clear",message:g.data.message||"Inventory levels are normal",toastType:"success",duration:3e3}),g.data;{const F=((a=(m=(i=g==null?void 0:g.data)==null?void 0:i.detail)==null?void 0:m[0])==null?void 0:a.msg)||((d=g==null?void 0:g.data)==null?void 0:d.error)||"Failed to check alerts";return n({title:"Error",message:F,toastType:"error",duration:3e3}),null}}catch(g){return n({title:"Error",message:(g==null?void 0:g.message)||"Something went wrong",toastType:"error",duration:3e3}),null}finally{p.value=!1}}}},xe={key:0,class:"block text-sm font-medium text-gray-700 mb-2"},De={class:"flex items-center gap-2 text-sm"},Ve={key:0,class:"text-gray-900"},Ce={key:1,class:"text-gray-400"},_e={class:"flex flex-wrap gap-2 mb-4 pb-4 border-b border-gray-100"},Me=["onClick"],$e={class:"flex flex-col sm:flex-row gap-4"},Se={class:"flex-1"},Te={class:"mb-3"},Re={class:"flex justify-between items-center mb-3"},Fe={class:"font-semibold text-sm"},Ee={class:"grid grid-cols-7 gap-1 mb-2"},Le={class:"grid grid-cols-7 gap-1"},ze=["onClick","disabled"],Be={class:"flex-1"},Ae={class:"mb-3"},Ye={class:"flex justify-between items-center mb-3"},je={class:"font-semibold text-sm"},Oe={class:"grid grid-cols-7 gap-1 mb-2"},Ne={class:"grid grid-cols-7 gap-1"},Ue=["onClick","disabled"],Ke=U({__name:"DateRangePicker",props:{modelValue:{},label:{default:""},placeholder:{default:"Select date range"},format:{default:"MM/DD/YYYY"},pickerWidth:{default:"w-full sm:w-[600px]"}},emits:["update:modelValue"],setup(p,{emit:v}){const n=p,w=v,h=V(null),l=V(!1),i=V(new Date),m=V(new Date),a=["Su","Mo","Tu","We","Th","Fr","Sa"],d=[{label:"Today",getValue:()=>{const t=b(new Date);return{from:t,to:t}}},{label:"Yesterday",getValue:()=>{const t=new Date;t.setDate(t.getDate()-1);const e=b(t);return{from:e,to:e}}},{label:"Last 7 Days",getValue:()=>{const t=new Date,e=new Date;return e.setDate(e.getDate()-6),{from:b(e),to:b(t)}}},{label:"Last 30 Days",getValue:()=>{const t=new Date,e=new Date;return e.setDate(e.getDate()-29),{from:b(e),to:b(t)}}},{label:"This Month",getValue:()=>{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1),o=new Date(t.getFullYear(),t.getMonth()+1,0);return{from:b(e),to:b(o)}}},{label:"Last Month",getValue:()=>{const t=new Date,e=new Date(t.getFullYear(),t.getMonth()-1,1),o=new Date(t.getFullYear(),t.getMonth(),0);return{from:b(e),to:b(o)}}}],g=C(()=>{if(!n.modelValue.from&&!n.modelValue.to)return"";const t=n.modelValue.from?f(n.modelValue.from):"",e=n.modelValue.to?f(n.modelValue.to):"";return t&&e?`${t} - ${e}`:t?`From ${t}`:e?`To ${e}`:""}),F=C(()=>i.value.toLocaleDateString("en-US",{month:"long",year:"numeric"})),j=C(()=>m.value.toLocaleDateString("en-US",{month:"long",year:"numeric"})),O=C(()=>E(i.value,n.modelValue.from)),N=C(()=>E(m.value,n.modelValue.to)),E=(t,e)=>{const o=[],k=t.getFullYear(),M=t.getMonth(),ee=new Date(k,M,1),te=new Date(k,M+1,0),oe=ee.getDay(),se=te.getDate(),ne=new Date(k,M,0).getDate();for(let D=oe-1;D>=0;D--){const $=ne-D,le=b(new Date(k,M-1,$));o.push({day:$,date:le,isCurrentMonth:!1,isSelected:!1})}for(let D=1;D<=se;D++){const $=b(new Date(k,M,D));o.push({day:D,date:$,isCurrentMonth:!0,isSelected:$===e})}const ae=42-o.length;for(let D=1;D<=ae;D++){const $=b(new Date(k,M+1,D));o.push({day:D,date:$,isCurrentMonth:!1,isSelected:!1})}return o},b=t=>{const e=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),k=String(t.getDate()).padStart(2,"0");return`${e}-${o}-${k}`},f=t=>{if(!t)return"";const e=new Date(t),o=String(e.getMonth()+1).padStart(2,"0"),k=String(e.getDate()).padStart(2,"0"),M=e.getFullYear();return`${o}/${k}/${M}`},c=t=>n.modelValue.from?new Date(t)<new Date(n.modelValue.from):!1,y=t=>{if(!n.modelValue.from||!n.modelValue.to)return!1;const e=new Date(t),o=new Date(n.modelValue.from),k=new Date(n.modelValue.to);return e>=o&&e<=k},L=(t,e)=>{const o=["p-2 text-sm rounded"];return t.isCurrentMonth?(o.push("text-gray-900 hover:bg-blue-50 cursor-pointer"),t.isSelected?o.push("bg-[#005B8F] text-white hover:bg-[#004a73]"):y(t.date)&&o.push("bg-blue-100"),e==="to"&&c(t.date)&&o.push("text-gray-300 cursor-not-allowed hover:bg-transparent")):o.push("text-gray-300 cursor-not-allowed"),o.join(" ")},J=()=>{if(l.value=!l.value,l.value){if(n.modelValue.from&&(i.value=new Date(n.modelValue.from)),n.modelValue.to)m.value=new Date(n.modelValue.to);else if(n.modelValue.from){const t=new Date(n.modelValue.from);t.setMonth(t.getMonth()+1),m.value=t}}},z=(t,e)=>{t==="from"?i.value=new Date(i.value.getFullYear(),i.value.getMonth()+e,1):m.value=new Date(m.value.getFullYear(),m.value.getMonth()+e,1)},I=(t,e)=>{const o={...n.modelValue};t==="from"?(o.from=e,o.to&&new Date(e)>new Date(o.to)&&(o.to="")):o.to=e,w("update:modelValue",o)},K=t=>{const e=t.getValue();w("update:modelValue",e),i.value=new Date(e.from),m.value=new Date(e.to)},X=()=>{w("update:modelValue",{from:"",to:""}),i.value=new Date,m.value=new Date},Z=()=>{l.value=!1},P=t=>{h.value&&!h.value.contains(t.target)&&(l.value=!1)};return W(()=>{document.addEventListener("click",P)}),H(()=>{document.removeEventListener("click",P)}),(t,e)=>(u(),r("div",{class:"relative",ref_key:"dateRangeRef",ref:h},[t.label?(u(),r("label",xe,x(t.label),1)):S("",!0),s("div",{onClick:J,class:_(["w-full px-3 py-3.5 border-[0.5px] border-gray-100 rounded-md outline-none cursor-pointer bg-white flex items-center justify-between",{"":l.value}])},[s("div",De,[e[4]||(e[4]=s("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),g.value?(u(),r("span",Ve,x(g.value),1)):(u(),r("span",Ce,x(t.placeholder),1))]),(u(),r("svg",{class:_(["w-5 h-5 text-gray-400 transition-transform",{"transform rotate-180":l.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e[5]||(e[5]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),q(Q,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:G(()=>[l.value?(u(),r("div",{key:0,class:_(["absolute z-50 mt-1 bg-white border-[0.5px] border-gray-100 rounded-lg shadow-lg p-4",t.pickerWidth])},[s("div",_e,[(u(),r(T,null,R(d,o=>s("button",{key:o.label,onClick:k=>K(o),class:"px-3 py-1 text-sm border-[0.5px] border-gray-100 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},x(o.label),9,Me)),64))]),s("div",$e,[s("div",Se,[e[8]||(e[8]=s("div",{class:"text-sm font-medium text-gray-700 mb-3"},"From",-1)),s("div",Te,[s("div",Re,[s("button",{onClick:e[0]||(e[0]=o=>z("from",-1)),class:"p-1 hover:bg-gray-50 rounded focus:outline-none"},e[6]||(e[6]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),s("span",Fe,x(F.value),1),s("button",{onClick:e[1]||(e[1]=o=>z("from",1)),class:"p-1 hover:bg-gray-50 rounded focus:outline-none"},e[7]||(e[7]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),s("div",Ee,[(u(),r(T,null,R(a,o=>s("div",{key:o,class:"text-center text-xs font-semibold text-gray-600 py-1"},x(o),1)),64))]),s("div",Le,[(u(!0),r(T,null,R(O.value,o=>(u(),r("button",{key:o.date,onClick:k=>I("from",o.date),disabled:!o.isCurrentMonth,class:_(L(o,"from"))},x(o.day),11,ze))),128))])])]),s("div",Be,[e[11]||(e[11]=s("div",{class:"text-sm font-medium text-gray-700 mb-3"},"To",-1)),s("div",Ae,[s("div",Ye,[s("button",{onClick:e[2]||(e[2]=o=>z("to",-1)),class:"p-1 hover:bg-gray-50 rounded focus:outline-none"},e[9]||(e[9]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),s("span",je,x(j.value),1),s("button",{onClick:e[3]||(e[3]=o=>z("to",1)),class:"p-1 hover:bg-gray-50 rounded focus:outline-none"},e[10]||(e[10]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),s("div",Oe,[(u(),r(T,null,R(a,o=>s("div",{key:o,class:"text-center text-xs font-semibold text-gray-600 py-1"},x(o),1)),64))]),s("div",Ne,[(u(!0),r(T,null,R(N.value,o=>(u(),r("button",{key:o.date,onClick:k=>I("to",o.date),disabled:!o.isCurrentMonth||c(o.date),class:_(L(o,"to"))},x(o.day),11,Ue))),128))])])])]),s("div",{class:"flex justify-end gap-2 pt-4 border-t border-gray-100"},[s("button",{onClick:X,class:"px-4 py-2 text-sm text-gray-700 bg-gray-50 hover:bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}," Clear "),s("button",{onClick:Z,class:"px-4 py-2 text-sm text-white bg-[#005B8F] hover:bg-[#004a73] rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}," Apply ")])],2)):S("",!0)]),_:1})],512))}}),Xe=U({__name:"LoadingSpinner",props:{size:{default:"md"},color:{default:"text-blue-600"}},setup(p){const v=p,n=C(()=>({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"})[v.size]),w=C(()=>`flex justify-center items-center ${v.color}`);return(h,l)=>(u(),r("div",{class:_(w.value)},[(u(),r("svg",{class:_(["animate-spin",n.value]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},l[0]||(l[0]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]),2))],2))}});export{Xe as _,Ge as a,Qe as b,Je as c,Ke as d,He as e,qe as u};
