import{p as $,E as L,a6 as x,l as C,a7 as q,r as S,a8 as K,a9 as B,aa as Q,ab as X,ac as Y,q as A,ad as T,h as Z}from"./Do_Shm6M.js";function ee(e){return Q()?(X(e),!0):!1}const te=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ne=Object.prototype.toString,re=e=>ne.call(e)==="[object Object]",oe=()=>{};function ue(...e){if(e.length!==1)return q(...e);const t=e[0];return typeof t=="function"?x(K(()=>({get:t,set:oe}))):S(t)}function se(e,t){function n(...l){return new Promise((f,p)=>{Promise.resolve(e(()=>t.apply(this,l),{fn:t,thisArg:this,args:l})).then(f).catch(p)})}return n}const P=e=>e();function ae(e=P,t={}){const{initialState:n="active"}=t,l=ue(n==="active");function f(){l.value=!1}function p(){l.value=!0}const y=(...s)=>{l.value&&e(...s)};return{isActive:x(l),pause:f,resume:p,eventFilter:y}}function R(e){return Array.isArray(e)?e:[e]}function le(e){return B()}function ie(e,t,n={}){const{eventFilter:l=P,...f}=n;return C(e,se(l,t),f)}function ce(e,t,n={}){const{eventFilter:l,initialState:f="active",...p}=n,{eventFilter:y,pause:s,resume:i,isActive:c}=ae(l,{initialState:f});return{stop:ie(e,t,{...p,eventFilter:y}),pause:s,resume:i,isActive:c}}function fe(e,t=!0,n){le()?$(e,n):t?e():L(e)}function de(e,t,n){return C(e,t,{...n,immediate:!0})}const U=te?window:void 0;function pe(e){var t;const n=T(e);return(t=n==null?void 0:n.$el)!=null?t:n}function J(...e){const t=[],n=()=>{t.forEach(s=>s()),t.length=0},l=(s,i,c,o)=>(s.addEventListener(i,c,o),()=>s.removeEventListener(i,c,o)),f=A(()=>{const s=R(T(e[0])).filter(i=>i!=null);return s.every(i=>typeof i!="string")?s:void 0}),p=de(()=>{var s,i;return[(i=(s=f.value)==null?void 0:s.map(c=>pe(c)))!=null?i:[U].filter(c=>c!=null),R(T(f.value?e[1]:e[0])),R(Z(f.value?e[2]:e[1])),T(f.value?e[3]:e[2])]},([s,i,c,o])=>{if(n(),!(s!=null&&s.length)||!(i!=null&&i.length)||!(c!=null&&c.length))return;const a=re(o)?{...o}:o;t.push(...s.flatMap(g=>i.flatMap(k=>c.map(j=>l(g,k,j,a)))))},{flush:"post"}),y=()=>{p(),n()};return ee(n),y}const F=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N="__vueuse_ssr_handlers__",ve=he();function he(){return N in F||(F[N]=F[N]||{}),F[N]}function ge(e,t){return ve[e]||t}function ye(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ke={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},z="vueuse-storage";function W(e,t,n,l={}){var f;const{flush:p="pre",deep:y=!0,listenToStorageChanges:s=!0,writeDefaults:i=!0,mergeDefaults:c=!1,shallow:o,window:a=U,eventFilter:g,onError:k=u=>{console.error(u)},initOnMounted:j}=l,b=(o?Y:S)(typeof t=="function"?t():t),m=A(()=>T(e));if(!n)try{n=ge("getDefaultStorage",()=>{var u;return(u=U)==null?void 0:u.localStorage})()}catch(u){k(u)}if(!n)return b;const w=T(t),M=ye(w),O=(f=l.serializer)!=null?f:ke[M],{pause:D,resume:V}=ce(b,()=>I(b.value),{flush:p,deep:y,eventFilter:g});C(m,()=>E(),{flush:p}),a&&s&&fe(()=>{n instanceof Storage?J(a,"storage",E,{passive:!0}):J(a,z,H),j&&E()}),j||E();function _(u,d){if(a){const v={key:m.value,oldValue:u,newValue:d,storageArea:n};a.dispatchEvent(n instanceof Storage?new StorageEvent("storage",v):new CustomEvent(z,{detail:v}))}}function I(u){try{const d=n.getItem(m.value);if(u==null)_(d,null),n.removeItem(m.value);else{const v=O.write(u);d!==v&&(n.setItem(m.value,v),_(d,v))}}catch(d){k(d)}}function G(u){const d=u?u.newValue:n.getItem(m.value);if(d==null)return i&&w!=null&&n.setItem(m.value,O.write(w)),w;if(!u&&c){const v=O.read(d);return typeof c=="function"?c(v,w):M==="object"&&!Array.isArray(v)?{...w,...v}:v}else return typeof d!="string"?d:O.read(d)}function E(u){if(!(u&&u.storageArea!==n)){if(u&&u.key==null){b.value=w;return}if(!(u&&u.key!==m.value)){D();try{(u==null?void 0:u.newValue)!==O.write(b.value)&&(b.value=G(u))}catch(d){k(d)}finally{u?L(V):V()}}}}function H(u){E(u.detail)}return b}const r={auth:S(),user:S({}),token:S(""),refreshToken:S("")},h={auth:S(),user:W("user",{}),token:W("token",""),refreshToken:W("refreshToken","")};S(null);C(r.user,e=>{e&&typeof e=="object"&&Object.keys(e).forEach(t=>{h.user.value[t]=e[t]})},{deep:!0});r.auth.value=h.auth.value,r.user.value=h.user.value,r.token.value=h.token.value,r.refreshToken.value=h.refreshToken.value;const Se=()=>{const e=A({get:()=>{var o,a;return((a=(o=r==null?void 0:r.user)==null?void 0:o.value)==null?void 0:a.user_id)??""},set:()=>{}}),t=A({get:()=>{var o,a;return(o=r.token)!=null&&o.value?((a=r==null?void 0:r.user)==null?void 0:a.value)!=null&&typeof r.user.value=="object"&&Object.keys(r.user.value).length>0:!1},set:()=>{}}),n=A(()=>{var o,a;return(a=(o=r==null?void 0:r.user)==null?void 0:o.value)==null?void 0:a.isEmailVerified});return{id:e,isLoggedIn:t,isEmailVerified:n,createUser:o=>{const{access_token:a,refresh_token:g,user:k}=o;h.token.value=a,h.refreshToken.value=g,r.token.value=a,r.refreshToken.value=g,h.user.value=k,r.user.value=k},...r,logOut:()=>{localStorage.clear(),r.user.value={},r.token.value="",r.refreshToken.value="",r.auth.value=null},updateUser:o=>{const g={...r.user.value||{},...o};r.user.value=g,h.user.value=g},setToken:o=>{r.token.value=o,h.token.value=o},setRefreshToken:o=>{r.refreshToken.value=o,h.refreshToken.value=o},getAccessToken:()=>r.token.value,getRefreshToken:()=>r.refreshToken.value}};export{Se as u};
